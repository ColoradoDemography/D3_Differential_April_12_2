<!DOCTYPE html>
<html>
  <head>
    <title>Colorado Legislature DP</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Load Esri Leaflet from CDN 
    <script src="https://unpkg.com/esri-leaflet/dist/esri-leaflet.js"></script> -->

    <script src="js/classyJenks.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script>

  <!-- Load geojson file from https://github.com/Tejaswini21nalla/LeafletMap -->
    <script src="js/cd.js"></script>
    <script src="js/sldl.js"></script>
    <script src="js/sldu.js"></script>
    <!--<script src="js/cd_data.js"></script>
    <script src="js/sldl_data.js"></script>
    <script src="js/sldu_data.js"></script>
    <script src="js/cd_sf1.js"></script>
    <script src="js/sldl_sf1.js"></script>
    <script src="js/sldu_sf1.js"></script>
    <script src="js/cd_dp.js"></script>
    <script src="js/sldl_dp.js"></script>
    <script src="js/sldu_dp.js"></script>
  <!-- <script src="shapefiles/tl_2012_06_sldl.js"></script> -->

    <style>
      html, body{
          margin:0; padding:0;  width : 100%; height : 100%;
          background: black; 
          font-family: "Source Sans Pro", sans-serif;
      }

      #top{
        margin-bottom: 15px;
      }

      #map{
        height: 85vh;
      }

      #mapLabel {
        z-index: 1000;
        position: absolute;
        width: 15%;
        top: 90%;
        left: 25%;
      }

      #pullDown {
        z-index: 1000;
        /* position: absolute; 
        width: 15%;*/
        top: 5%;
        right:0%;
        text-align: right;
      }

      #pullDownGeo {
        z-index: 1000;
        /* position: absolute; 
        width: 15%;*/
        top: 5%;
        left:0%;
        text-align: right;
      }
        
      #header{
        color: #BDBDBD;
        text-align: center;
        margin-bottom: 0;
      }

      .column {
        float: left;
        height: 90vh;
      }

      .left {
        width: 40%;
        margin-left: 25px;
      }
      .right {
        width: 50%;
        padding-left: 25px;
        margin-left: 20px;
      }
      /* Clear floats after the columns */
      .row:after {
          content: "";
          display: table;
          clear: both;
      }
      .legend {
          text-align: right;
          line-height: 18px;
          color: #555;
          /* background: lightgray; */
		  }
      .legend i {
          width: 24px;
          height: 14px;
          float: left;
          margin-right: 8px;
          opacity: 0.7;
      }
      .info {
          padding: 6px 8px;
          /* font: 14px/16px Arial, Helvetica, sans-serif;*/
          color: #BDBDBD ;
          box-shadow: 0 0 15px rgba(0,0,0,0.2);
          border-radius: 5px;
		  }
      #graph {
        height: 100%;
      }
      #sf1Bar, #dpBar, #diffBar {
        height: 25vh;
        width: 100%;
      }
      /* #dpBar {
        height: 45vh;
        width: 100%;
      }*/
      .barText, .lblText {
        fill: #BDBDBD ;
      }
      .axis{
        color: #BDBDBD;
      }
      .bar.positive {
        fill: steelblue;
      }
      .bar.negative {
        fill: brown;
      }

    </style>
  </head>
  <body>
  <div id='top'>
    <h3 id="header">Differential Privacy (11/16 Flight) and 2010 Census Summary File 1: Colorado Districts</h3>
  </div>

  <div class='row'>
    <div id="mapContainer" class = 'column left'>
      <div id="pullDownGeo">
        <p style="margin-bottom: 0; color: #BDBDBD; ">Districts</p>
        <div class=menu >
            <select name="distType" id="districtType"> 
                <option value="cd">Congressional</option>
                <option value="sldu">State Senate</option>
                <option value="sldl">State House</option>
            </select> 
        </div> 
      </div>
      <div id="pullDown">
        <p style="margin-bottom: 0; color: #BDBDBD; ">Race/Ethnicity</p>
        <div class=menu >
            <select name="raceEth" id="raceEthnicity"> 
                <option value="tp">Total Population 18+</option>
                <option value="hisp">Hispanic, Any Race</option>
                <option value="wnh">White Non-Hispanic</option>
                <option value="bnh">Black Non-Hispanic</option>
                <option value="aiannh">American Indian and Native Alaskan Non-Hispanic</option>
                <option value="anh">Asian Non-Hispanic</option>
                <option value="nhpinh">Native Hawaiian and Pacific Islander Non-Hispanic</option>
                <option value="onh">Other Non-Hispanic</option>
                <option value="tomnh">Two or More Races Non-Hispanic</option>
            </select> 
        </div> 
      </div>
      <div id='map'></div>
      <div id="mapLabel">
        <p style="color: #BDBDBD; font-size: 12px;">Click on a district to view the population distribution by race/ethnicity for that district. Click outside the Colorado map to reset.</p>
      </div>
    </div>

    <div id="rtSide" class = 'column right'>
      <div id="graph">
        <p id="sf1Tag" style="color:#BDBDBD; margin-bottom: 5px;">SF1 - Population 18 Years And Over by Race - Colorado</p>
        <div id="sf1Bar"></div>        
        <p id="dpTag" style="color:#BDBDBD; margin-top: 0; margin-bottom: 5px;">Differential Privacy - Population 18 Years And Over by Race - Colorado</p>
        <div id="dpBar"></div>    
          <p id="chgTag" style="color:#BDBDBD; margin-top: 0; margin-bottom: 0;">Difference (DP - SF1) - Population 18 Years And Over by Race - Colorado</p>
          <p id="chgTotal" style="margin:0"></p>
        <div id="diffBar"></div>   
      </div>
    </div>

  </div>

    <script>
        
        //***********************************************data*************************************
        
var cd_data = [
 {
   dist: '01',
   chg: 65,
   hisp: -9,
   whitenh: 60,
   blacknh: -38,
   aiannh: 36,
   asiannh: -7,
   nhopinh: -3,
   othernh: -8,
   twoplusnh: 34
 },
 {
   dist: '02',
   chg: 135,
   hisp: -5,
   whitenh: 18,
   blacknh: 66,
   aiannh: -45,
   asiannh: -64,
   nhopinh: -49,
   othernh: 28,
   twoplusnh: 186
 },
 {
   dist: '03',
   chg: -46,
   hisp: 31,
   whitenh: 67,
   blacknh: 4,
   aiannh: 37,
   asiannh: -32,
   nhopinh: -39,
   othernh: -5,
   twoplusnh: -109
 },
 {
   dist: '04',
   chg: 146,
   hisp: 81,
   whitenh: -14,
   blacknh: -5,
   aiannh: 57,
   asiannh: 85,
   nhopinh: 17,
   othernh: -16,
   twoplusnh: -59
 },
 {
   dist: '05',
   chg: -141,
   hisp: 55,
   whitenh: -66,
   blacknh: 3,
   aiannh: -33,
   asiannh: -13,
   nhopinh: -14,
   othernh: -11,
   twoplusnh: -62
 },
 {
   dist: '06',
   chg: -537,
   hisp: -381,
   whitenh: -110,
   blacknh: 41,
   aiannh: -40,
   asiannh: 1,
   nhopinh: -25,
   othernh: 51,
   twoplusnh: -74
 },
 {
   dist: '07',
   chg: 362,
   hisp: 208,
   whitenh: 47,
   blacknh: -68,
   aiannh: -13,
   asiannh: 22,
   nhopinh: 82,
   othernh: -51,
   twoplusnh: 135
 }
];
        
var cd_sf1 = [
 {
   dist: '01',
   hisp: 133269,
   whitenh: 309927,
   blacknh: 46371,
   aiannh: 3127,
   asiannh: 17471,
   nhopinh: 423,
   othernh: 932,
   twoplusnh: 8610
 },
 {
   dist: '02',
   hisp: 94936,
   whitenh: 424793,
   blacknh: 5708,
   aiannh: 2365,
   asiannh: 21298,
   nhopinh: 378,
   othernh: 731,
   twoplusnh: 6770
 },
 {
   dist: '03',
   hisp: 113900,
   whitenh: 406261,
   blacknh: 3969,
   aiannh: 6911,
   asiannh: 3586,
   nhopinh: 363,
   othernh: 615,
   twoplusnh: 5855
 },
 {
   dist: '04',
   hisp: 91796,
   whitenh: 434085,
   blacknh: 6537,
   aiannh: 2993,
   asiannh: 8340,
   nhopinh: 328,
   othernh: 564,
   twoplusnh: 5889
 },
 {
   dist: '05',
   hisp: 66596,
   whitenh: 418573,
   blacknh: 28059,
   aiannh: 3701,
   asiannh: 13515,
   nhopinh: 1380,
   othernh: 753,
   twoplusnh: 11437
 },
 {
   dist: '06',
   hisp: 42928,
   whitenh: 489314,
   blacknh: 15286,
   aiannh: 1938,
   asiannh: 22772,
   nhopinh: 509,
   othernh: 614,
   twoplusnh: 7420
 },
 {
   dist: '07',
   hisp: 121037,
   whitenh: 327560,
   blacknh: 32881,
   aiannh: 2911,
   asiannh: 16357,
   nhopinh: 723,
   othernh: 641,
   twoplusnh: 7581
 },
 {
   dist: 'CO',
   hisp: 664462,
   whitenh: 2810513,
   blacknh: 138811,
   aiannh: 23946,
   asiannh: 103339,
   nhopinh: 4104,
   othernh: 4850,
   twoplusnh: 53562
 }
];
        
var cd_dp = [
 {
   dist: '01',
   hisp: 133278,
   whitenh: 309867,
   blacknh: 46409,
   aiannh: 3091,
   asiannh: 17478,
   nhopinh: 426,
   othernh: 940,
   twoplusnh: 8576
 },
 {
   dist: '02',
   hisp: 94941,
   whitenh: 424775,
   blacknh: 5642,
   aiannh: 2410,
   asiannh: 21362,
   nhopinh: 427,
   othernh: 703,
   twoplusnh: 6584
 },
 {
   dist: '03',
   hisp: 113869,
   whitenh: 406194,
   blacknh: 3965,
   aiannh: 6874,
   asiannh: 3618,
   nhopinh: 402,
   othernh: 620,
   twoplusnh: 5964
 },
 {
   dist: '04',
   hisp: 91715,
   whitenh: 434099,
   blacknh: 6542,
   aiannh: 2936,
   asiannh: 8255,
   nhopinh: 311,
   othernh: 580,
   twoplusnh: 5948
 },
 {
   dist: '05',
   hisp: 66541,
   whitenh: 418639,
   blacknh: 28056,
   aiannh: 3734,
   asiannh: 13528,
   nhopinh: 1394,
   othernh: 764,
   twoplusnh: 11499
 },
 {
   dist: '06',
   hisp: 43309,
   whitenh: 489424,
   blacknh: 15245,
   aiannh: 1978,
   asiannh: 22771,
   nhopinh: 534,
   othernh: 563,
   twoplusnh: 7494
 },
 {
   dist: '07',
   hisp: 120829,
   whitenh: 327513,
   blacknh: 32949,
   aiannh: 2924,
   asiannh: 16335,
   nhopinh: 641,
   othernh: 692,
   twoplusnh: 7446
 },
 {
   dist: 'CO',
   hisp: 664482,
   whitenh: 2810511,
   blacknh: 138808,
   aiannh: 23947,
   asiannh: 103347,
   nhopinh: 4135,
   othernh: 4862,
   twoplusnh: 53511
 }
];

 var sldu_data = [
 {
   dist: '1',
   chg: 56,
   hisp: -10,
   whitenh: 76,
   blacknh: 15,
   aiannh: -3,
   asiannh: 26,
   nhopinh: 8,
   othernh: 12,
   twoplusnh: -68
 },
 {
   dist: '2',
   chg: 36,
   hisp: 17,
   whitenh: -12,
   blacknh: -10,
   aiannh: 35,
   asiannh: 19,
   nhopinh: -3,
   othernh: 18,
   twoplusnh: -28
 },
 {
   dist: '3',
   chg: -25,
   hisp: -41,
   whitenh: 36,
   blacknh: -4,
   aiannh: 41,
   asiannh: -27,
   nhopinh: 0,
   othernh: -2,
   twoplusnh: -28
 },
 {
   dist: '4',
   chg: -160,
   hisp: -49,
   whitenh: -65,
   blacknh: 8,
   aiannh: -9,
   asiannh: -36,
   nhopinh: 7,
   othernh: 17,
   twoplusnh: -33
 },
 {
   dist: '5',
   chg: -35,
   hisp: -57,
   whitenh: 61,
   blacknh: 16,
   aiannh: 28,
   asiannh: 6,
   nhopinh: -20,
   othernh: -7,
   twoplusnh: -62
 },
 {
   dist: '6',
   chg: -59,
   hisp: 87,
   whitenh: -3,
   blacknh: -4,
   aiannh: -44,
   asiannh: -19,
   nhopinh: -10,
   othernh: -9,
   twoplusnh: -57
 },
 {
   dist: '7',
   chg: 15,
   hisp: -6,
   whitenh: -21,
   blacknh: 3,
   aiannh: -14,
   asiannh: 2,
   nhopinh: -3,
   othernh: 4,
   twoplusnh: 50
 },
 {
   dist: '8',
   chg: -33,
   hisp: 1,
   whitenh: -33,
   blacknh: 10,
   aiannh: -1,
   asiannh: 18,
   nhopinh: -1,
   othernh: -9,
   twoplusnh: -18
 },
 {
   dist: '9',
   chg: -125,
   hisp: -7,
   whitenh: 2,
   blacknh: 2,
   aiannh: -7,
   asiannh: 9,
   nhopinh: -4,
   othernh: 21,
   twoplusnh: -141
 },
 {
   dist: '10',
   chg: -15,
   hisp: 20,
   whitenh: -45,
   blacknh: -58,
   aiannh: -1,
   asiannh: 26,
   nhopinh: -16,
   othernh: 1,
   twoplusnh: 58
 },
 {
   dist: '11',
   chg: 122,
   hisp: 100,
   whitenh: 23,
   blacknh: 61,
   aiannh: -8,
   asiannh: -9,
   nhopinh: -7,
   othernh: -49,
   twoplusnh: 11
 },
 {
   dist: '12',
   chg: 40,
   hisp: -46,
   whitenh: 8,
   blacknh: 14,
   aiannh: -14,
   asiannh: 1,
   nhopinh: 5,
   othernh: 24,
   twoplusnh: 48
 },
 {
   dist: '13',
   chg: 94,
   hisp: 48,
   whitenh: -5,
   blacknh: 10,
   aiannh: 20,
   asiannh: 6,
   nhopinh: 10,
   othernh: -8,
   twoplusnh: 13
 },
 {
   dist: '14',
   chg: 44,
   hisp: -31,
   whitenh: 11,
   blacknh: 15,
   aiannh: 51,
   asiannh: -17,
   nhopinh: 10,
   othernh: -15,
   twoplusnh: 20
 },
 {
   dist: '15',
   chg: 16,
   hisp: 61,
   whitenh: -40,
   blacknh: -5,
   aiannh: -54,
   asiannh: 33,
   nhopinh: -7,
   othernh: 7,
   twoplusnh: 21
 },
 {
   dist: '16',
   chg: -108,
   hisp: -111,
   whitenh: -5,
   blacknh: 27,
   aiannh: -22,
   asiannh: 12,
   nhopinh: -13,
   othernh: -7,
   twoplusnh: 11
 },
 {
   dist: '17',
   chg: 68,
   hisp: 50,
   whitenh: 11,
   blacknh: 2,
   aiannh: 31,
   asiannh: -3,
   nhopinh: 1,
   othernh: -8,
   twoplusnh: -16
 },
 {
   dist: '18',
   chg: -5,
   hisp: -55,
   whitenh: -40,
   blacknh: -16,
   aiannh: 5,
   asiannh: 10,
   nhopinh: 11,
   othernh: 5,
   twoplusnh: 75
 },
 {
   dist: '19',
   chg: 100,
   hisp: 86,
   whitenh: 15,
   blacknh: 0,
   aiannh: 30,
   asiannh: -9,
   nhopinh: -13,
   othernh: -42,
   twoplusnh: 33
 },
 {
   dist: '20',
   chg: 63,
   hisp: 134,
   whitenh: -38,
   blacknh: -39,
   aiannh: -16,
   asiannh: -19,
   nhopinh: 15,
   othernh: 11,
   twoplusnh: 15
 },
 {
   dist: '21',
   chg: 147,
   hisp: -2,
   whitenh: 91,
   blacknh: -8,
   aiannh: -20,
   asiannh: -9,
   nhopinh: 6,
   othernh: 24,
   twoplusnh: 65
 },
 {
   dist: '22',
   chg: -165,
   hisp: -143,
   whitenh: -57,
   blacknh: 43,
   aiannh: 1,
   asiannh: 16,
   nhopinh: 13,
   othernh: 18,
   twoplusnh: -56
 },
 {
   dist: '23',
   chg: -143,
   hisp: -149,
   whitenh: 7,
   blacknh: -9,
   aiannh: 10,
   asiannh: -1,
   nhopinh: -27,
   othernh: -4,
   twoplusnh: 30
 },
 {
   dist: '24',
   chg: 100,
   hisp: 94,
   whitenh: -3,
   blacknh: 9,
   aiannh: 21,
   asiannh: -38,
   nhopinh: 2,
   othernh: 26,
   twoplusnh: -11
 },
 {
   dist: '25',
   chg: -124,
   hisp: -130,
   whitenh: 24,
   blacknh: -20,
   aiannh: -48,
   asiannh: 31,
   nhopinh: 37,
   othernh: -23,
   twoplusnh: 5
 },
 {
   dist: '26',
   chg: -320,
   hisp: -26,
   whitenh: -56,
   blacknh: -33,
   aiannh: -5,
   asiannh: -16,
   nhopinh: -8,
   othernh: -12,
   twoplusnh: -164
 },
 {
   dist: '27',
   chg: -164,
   hisp: -188,
   whitenh: 6,
   blacknh: 24,
   aiannh: -34,
   asiannh: -26,
   nhopinh: -24,
   othernh: 26,
   twoplusnh: 52
 },
 {
   dist: '28',
   chg: 201,
   hisp: 171,
   whitenh: -19,
   blacknh: -12,
   aiannh: 10,
   asiannh: 0,
   nhopinh: -13,
   othernh: 26,
   twoplusnh: 38
 },
 {
   dist: '29',
   chg: 285,
   hisp: 94,
   whitenh: 43,
   blacknh: -1,
   aiannh: 11,
   asiannh: 38,
   nhopinh: 44,
   othernh: -37,
   twoplusnh: 93
 },
 {
   dist: '30',
   chg: 39,
   hisp: 47,
   whitenh: -6,
   blacknh: -23,
   aiannh: -6,
   asiannh: -13,
   nhopinh: -11,
   othernh: -25,
   twoplusnh: 76
 },
 {
   dist: '31',
   chg: 124,
   hisp: 106,
   whitenh: -49,
   blacknh: 53,
   aiannh: 3,
   asiannh: -29,
   nhopinh: -2,
   othernh: -2,
   twoplusnh: 44
 },
 {
   dist: '32',
   chg: -118,
   hisp: -57,
   whitenh: -41,
   blacknh: -34,
   aiannh: 22,
   asiannh: 44,
   nhopinh: -14,
   othernh: 8,
   twoplusnh: -46
 },
 {
   dist: '33',
   chg: 238,
   hisp: 63,
   whitenh: 101,
   blacknh: -66,
   aiannh: 5,
   asiannh: 6,
   nhopinh: 6,
   othernh: -22,
   twoplusnh: 145
 },
 {
   dist: '34',
   chg: -146,
   hisp: -52,
   whitenh: 78,
   blacknh: 29,
   aiannh: -2,
   asiannh: -23,
   nhopinh: 7,
   othernh: 8,
   twoplusnh: -191
 },
 {
   dist: '35',
   chg: -59,
   hisp: -39,
   whitenh: -53,
   blacknh: 4,
   aiannh: -17,
   asiannh: -17,
   nhopinh: -17,
   othernh: 13,
   twoplusnh: 67
 }
];
        
        var sldu_sf1 = [
 {
   dist: '1',
   hisp: 15641,
   whitenh: 75011,
   blacknh: 2011,
   aiannh: 505,
   asiannh: 472,
   nhopinh: 43,
   othernh: 60,
   twoplusnh: 659
 },
 {
   dist: '2',
   hisp: 22586,
   whitenh: 72247,
   blacknh: 3148,
   aiannh: 1157,
   asiannh: 570,
   nhopinh: 34,
   othernh: 85,
   twoplusnh: 969
 },
 {
   dist: '3',
   hisp: 41648,
   whitenh: 60204,
   blacknh: 2051,
   aiannh: 684,
   asiannh: 850,
   nhopinh: 76,
   othernh: 163,
   twoplusnh: 1185
 },
 {
   dist: '4',
   hisp: 8473,
   whitenh: 118100,
   blacknh: 1077,
   aiannh: 596,
   asiannh: 1838,
   nhopinh: 83,
   othernh: 159,
   twoplusnh: 1572
 },
 {
   dist: '5',
   hisp: 21227,
   whitenh: 76530,
   blacknh: 654,
   aiannh: 640,
   asiannh: 683,
   nhopinh: 37,
   othernh: 126,
   twoplusnh: 978
 },
 {
   dist: '6',
   hisp: 12965,
   whitenh: 93191,
   blacknh: 297,
   aiannh: 4266,
   asiannh: 613,
   nhopinh: 60,
   othernh: 121,
   twoplusnh: 1342
 },
 {
   dist: '7',
   hisp: 12985,
   whitenh: 99215,
   blacknh: 584,
   aiannh: 755,
   asiannh: 859,
   nhopinh: 126,
   othernh: 90,
   twoplusnh: 1334
 },
 {
   dist: '8',
   hisp: 21924,
   whitenh: 86879,
   blacknh: 513,
   aiannh: 443,
   asiannh: 818,
   nhopinh: 61,
   othernh: 133,
   twoplusnh: 898
 },
 {
   dist: '9',
   hisp: 10032,
   whitenh: 91943,
   blacknh: 3841,
   aiannh: 544,
   asiannh: 4018,
   nhopinh: 183,
   othernh: 162,
   twoplusnh: 2395
 },
 {
   dist: '10',
   hisp: 14827,
   whitenh: 91421,
   blacknh: 6310,
   aiannh: 700,
   asiannh: 3327,
   nhopinh: 300,
   othernh: 186,
   twoplusnh: 2738
 },
 {
   dist: '11',
   hisp: 19235,
   whitenh: 60920,
   blacknh: 8638,
   aiannh: 723,
   asiannh: 2170,
   nhopinh: 307,
   othernh: 149,
   twoplusnh: 2515
 },
 {
   dist: '12',
   hisp: 12546,
   whitenh: 79303,
   blacknh: 6842,
   aiannh: 702,
   asiannh: 3020,
   nhopinh: 541,
   othernh: 155,
   twoplusnh: 2506
 },
 {
   dist: '13',
   hisp: 30225,
   whitenh: 81504,
   blacknh: 1168,
   aiannh: 537,
   asiannh: 1227,
   nhopinh: 83,
   othernh: 152,
   twoplusnh: 1227
 },
 {
   dist: '14',
   hisp: 10062,
   whitenh: 98891,
   blacknh: 1248,
   aiannh: 440,
   asiannh: 3047,
   nhopinh: 104,
   othernh: 144,
   twoplusnh: 1870
 },
 {
   dist: '15',
   hisp: 10226,
   whitenh: 105998,
   blacknh: 456,
   aiannh: 520,
   asiannh: 1284,
   nhopinh: 56,
   othernh: 91,
   twoplusnh: 1136
 },
 {
   dist: '16',
   hisp: 6165,
   whitenh: 96904,
   blacknh: 498,
   aiannh: 338,
   asiannh: 2285,
   nhopinh: 47,
   othernh: 102,
   twoplusnh: 1007
 },
 {
   dist: '17',
   hisp: 17258,
   whitenh: 81263,
   blacknh: 774,
   aiannh: 482,
   asiannh: 3513,
   nhopinh: 44,
   othernh: 114,
   twoplusnh: 1128
 },
 {
   dist: '18',
   hisp: 6941,
   whitenh: 89053,
   blacknh: 894,
   aiannh: 295,
   asiannh: 4433,
   nhopinh: 67,
   othernh: 168,
   twoplusnh: 1656
 },
 {
   dist: '19',
   hisp: 10472,
   whitenh: 76682,
   blacknh: 747,
   aiannh: 355,
   asiannh: 2720,
   nhopinh: 63,
   othernh: 89,
   twoplusnh: 1030
 },
 {
   dist: '20',
   hisp: 12683,
   whitenh: 77568,
   blacknh: 974,
   aiannh: 556,
   asiannh: 2033,
   nhopinh: 79,
   othernh: 105,
   twoplusnh: 1238
 },
 {
   dist: '21',
   hisp: 18414,
   whitenh: 69930,
   blacknh: 1329,
   aiannh: 673,
   asiannh: 2855,
   nhopinh: 87,
   othernh: 116,
   twoplusnh: 1165
 },
 {
   dist: '22',
   hisp: 7258,
   whitenh: 84985,
   blacknh: 605,
   aiannh: 317,
   asiannh: 2355,
   nhopinh: 55,
   othernh: 110,
   twoplusnh: 936
 },
 {
   dist: '23',
   hisp: 21212,
   whitenh: 107395,
   blacknh: 1167,
   aiannh: 908,
   asiannh: 4990,
   nhopinh: 84,
   othernh: 149,
   twoplusnh: 1541
 },
 {
   dist: '24',
   hisp: 35421,
   whitenh: 68529,
   blacknh: 1850,
   aiannh: 723,
   asiannh: 4207,
   nhopinh: 99,
   othernh: 155,
   twoplusnh: 1409
 },
 {
   dist: '25',
   hisp: 44825,
   whitenh: 68743,
   blacknh: 5893,
   aiannh: 719,
   asiannh: 3340,
   nhopinh: 174,
   othernh: 145,
   twoplusnh: 1604
 },
 {
   dist: '26',
   hisp: 10066,
   whitenh: 76282,
   blacknh: 1259,
   aiannh: 490,
   asiannh: 1741,
   nhopinh: 83,
   othernh: 92,
   twoplusnh: 1123
 },
 {
   dist: '27',
   hisp: 10473,
   whitenh: 105610,
   blacknh: 7056,
   aiannh: 390,
   asiannh: 9608,
   nhopinh: 159,
   othernh: 153,
   twoplusnh: 2124
 },
 {
   dist: '28',
   hisp: 14051,
   whitenh: 64233,
   blacknh: 12414,
   aiannh: 448,
   asiannh: 5608,
   nhopinh: 187,
   othernh: 182,
   twoplusnh: 2144
 },
 {
   dist: '29',
   hisp: 29429,
   whitenh: 38270,
   blacknh: 18280,
   aiannh: 510,
   asiannh: 4295,
   nhopinh: 277,
   othernh: 136,
   twoplusnh: 2125
 },
 {
   dist: '30',
   hisp: 8627,
   whitenh: 111345,
   blacknh: 1674,
   aiannh: 367,
   asiannh: 6214,
   nhopinh: 80,
   othernh: 127,
   twoplusnh: 1665
 },
 {
   dist: '31',
   hisp: 31367,
   whitenh: 66232,
   blacknh: 2930,
   aiannh: 737,
   asiannh: 3623,
   nhopinh: 96,
   othernh: 174,
   twoplusnh: 1635
 },
 {
   dist: '32',
   hisp: 24461,
   whitenh: 73118,
   blacknh: 1929,
   aiannh: 588,
   asiannh: 3878,
   nhopinh: 69,
   othernh: 160,
   twoplusnh: 1258
 },
 {
   dist: '33',
   hisp: 33246,
   whitenh: 48658,
   blacknh: 28326,
   aiannh: 643,
   asiannh: 3740,
   nhopinh: 128,
   othernh: 212,
   twoplusnh: 2600
 },
 {
   dist: '34',
   hisp: 44688,
   whitenh: 36384,
   blacknh: 1614,
   aiannh: 782,
   asiannh: 2265,
   nhopinh: 55,
   othernh: 170,
   twoplusnh: 846
 },
 {
   dist: '35',
   hisp: 12803,
   whitenh: 77972,
   blacknh: 9760,
   aiannh: 413,
   asiannh: 4840,
   nhopinh: 77,
   othernh: 215,
   twoplusnh: 2004
 },
 {
   dist: 'CO',
   hisp: 664462,
   whitenh: 2810513,
   blacknh: 138811,
   aiannh: 23946,
   asiannh: 103339,
   nhopinh: 4104,
   othernh: 4850,
   twoplusnh: 53562
 }
];
        
        var sldu_dp = [
 {
   dist: '1',   hisp: 16689,   whitenh: 86887,   blacknh: 2086,   aiannh: 1050,   asiannh: 391,   nhopinh: 90,   othernh: 67,   twoplusnh: 831
 }, {
   dist: '2',   hisp: 10606,   whitenh: 93639,   blacknh: 3926,   aiannh: 1278,   asiannh: 1146,   nhopinh: 108,   othernh: 156,   twoplusnh: 1613
 }, {
   dist: '3',   hisp: 41968,   whitenh: 58511,   blacknh: 2019,   aiannh: 692,   asiannh: 887,   nhopinh: 102,   othernh: 72,   twoplusnh: 1119
 }, {
   dist: '4',   hisp: 6549,   whitenh: 88071,   blacknh: 1144,   aiannh: 388,   asiannh: 1997,   nhopinh: 21,   othernh: 58,   twoplusnh: 1172
 }, {
   dist: '5',   hisp: 17837,   whitenh: 90217,   blacknh: 657,   aiannh: 343,   asiannh: 965,   nhopinh: 11,   othernh: 327,   twoplusnh: 926
 }, {
   dist: '6',   hisp: 12813,   whitenh: 93170,   blacknh: 230,   aiannh: 4461,   asiannh: 546,   nhopinh: 145,   othernh: 96,   twoplusnh: 1378
 }, {
   dist: '7',   hisp: 12311,   whitenh: 96352,   blacknh: 534,   aiannh: 693,   asiannh: 895,   nhopinh: 63,   othernh: 69,   twoplusnh: 1277
 }, {
   dist: '8',   hisp: 16091,   whitenh: 91957,   blacknh: 554,   aiannh: 472,   asiannh: 672,   nhopinh: 11,   othernh: 101,   twoplusnh: 1077
 }, {
   dist: '9',   hisp: 6781,   whitenh: 91128,   blacknh: 1976,   aiannh: 511,   asiannh: 3470,   nhopinh: 147,   othernh: 70,   twoplusnh: 1920
 }, {
   dist: '10',   hisp: 12535,   whitenh: 84833,   blacknh: 4505,   aiannh: 543,   asiannh: 3414,   nhopinh: 185,   othernh: 119,   twoplusnh: 2237
 }, {
   dist: '11',   hisp: 21870,   whitenh: 67315,   blacknh: 10316,   aiannh: 787,   asiannh: 2533,   nhopinh: 366,   othernh: 193,   twoplusnh: 2968
 }, {
   dist: '12',   hisp: 12307,   whitenh: 77829,   blacknh: 7198,   aiannh: 587,   asiannh: 2953,   nhopinh: 574,   othernh: 153,   twoplusnh: 2607
 }, {
   dist: '13',   hisp: 33727,   whitenh: 67194,   blacknh: 1106,   aiannh: 539,   asiannh: 1316,   nhopinh: 109,   othernh: 139,   twoplusnh: 1127
 }, {
   dist: '14',   hisp: 10499,   whitenh: 99769,   blacknh: 1291,   aiannh: 465,   asiannh: 3445,   nhopinh: 65,   othernh: 162,   twoplusnh: 1935
 }, {
   dist: '15',   hisp: 9007,   whitenh: 96993,   blacknh: 436,   aiannh: 398,   asiannh: 828,   nhopinh: 111,   othernh: 83,   twoplusnh: 1103
 }, {
   dist: '16',   hisp: 9790,   whitenh: 97774,   blacknh: 981,   aiannh: 571,   asiannh: 3906,   nhopinh: 98,   othernh: 185,   twoplusnh: 1248
 }, {
   dist: '17',   hisp: 17152,   whitenh: 80377,   blacknh: 922,   aiannh: 469,   asiannh: 3445,   nhopinh: 47,   othernh: 155,   twoplusnh: 1178
 }, {
   dist: '18',   hisp: 7531,   whitenh: 102703,   blacknh: 812,   aiannh: 270,   asiannh: 4732,   nhopinh: 30,   othernh: 223,   twoplusnh: 1765
 }, {
   dist: '19',   hisp: 12587,   whitenh: 89349,   blacknh: 979,   aiannh: 475,   asiannh: 3153,   nhopinh: 89,   othernh: 184,   twoplusnh: 1434
 }, {
   dist: '20',   hisp: 12252,   whitenh: 98213,   blacknh: 829,   aiannh: 525,   asiannh: 2302,   nhopinh: 78,   othernh: 71,   twoplusnh: 1132
 }, {
   dist: '21',   hisp: 45608,   whitenh: 51636,   blacknh: 1442,   aiannh: 606,   asiannh: 3400,   nhopinh: 172,   othernh: 91,   twoplusnh: 1094
 }, {
   dist: '22',   hisp: 21237,   whitenh: 85421,   blacknh: 1418,   aiannh: 788,   asiannh: 3345,   nhopinh: 68,   othernh: 95,   twoplusnh: 1325
 }, {
   dist: '23',   hisp: 10780,   whitenh: 87013,   blacknh: 731,   aiannh: 362,   asiannh: 3426,   nhopinh: 45,   othernh: 13,   twoplusnh: 998
 }, {
   dist: '24',   hisp: 21562,   whitenh: 77737,   blacknh: 1751,   aiannh: 582,   asiannh: 5065,   nhopinh: 74,   othernh: 194,   twoplusnh: 1463
 }, {
   dist: '25',   hisp: 37108,   whitenh: 55206,   blacknh: 5550,   aiannh: 626,   asiannh: 2882,   nhopinh: 89,   othernh: 204,   twoplusnh: 1351
 }, {
   dist: '26',   hisp: 13856,   whitenh: 85277,   blacknh: 6242,   aiannh: 614,   asiannh: 4436,   nhopinh: 152,   othernh: 116,   twoplusnh: 1772
 }, {
   dist: '27',   hisp: 6910,   whitenh: 83898,   blacknh: 3791,   aiannh: 354,   asiannh: 6436,   nhopinh: 132,   othernh: 138,   twoplusnh: 1383
 }, {
   dist: '28',   hisp: 14922,   whitenh: 65541,   blacknh: 12153,   aiannh: 372,   asiannh: 6743,   nhopinh: 184,   othernh: 264,   twoplusnh: 2152
 }, {
   dist: '29',   hisp: 28259,   whitenh: 49638,   blacknh: 16704,   aiannh: 569,   asiannh: 3570,   nhopinh: 229,   othernh: 54,   twoplusnh: 2122
 }, {
   dist: '30',   hisp: 6266,   whitenh: 84648,   blacknh: 1182,   aiannh: 229,   asiannh: 5294,   nhopinh: 74,   othernh: 130,   twoplusnh: 1248
 }, {
   dist: '31',   hisp: 14184,   whitenh: 92318,   blacknh: 10538,   aiannh: 412,   asiannh: 4588,   nhopinh: 142,   othernh: 315,   twoplusnh: 2414
 }, {
   dist: '32',   hisp: 30650,   whitenh: 77138,   blacknh: 1801,   aiannh: 768,   asiannh: 4512,   nhopinh: 103,   othernh: 204,   twoplusnh: 1411
 }, {
   dist: '33',   hisp: 29446,   whitenh: 40668,   blacknh: 28162,   aiannh: 505,   asiannh: 3440,   nhopinh: 121,   othernh: 146,   twoplusnh: 2338
 }, {
   dist: '34',   hisp: 46828,   whitenh: 53588,   blacknh: 3156,   aiannh: 977,   asiannh: 2699,   nhopinh: 79,   othernh: 31,   twoplusnh: 1438
 }, {
   dist: '35',   hisp: 35679,   whitenh: 68477,   blacknh: 1768,   aiannh: 602,   asiannh: 479,   nhopinh: 67,   othernh: 185,   twoplusnh: 1160
 }, {
   dist: 'CO',   hisp: 664197,   whitenh: 2810485,   blacknh: 138890,   aiannh: 23883,   asiannh: 103311,   nhopinh: 4181,   othernh: 4863,   twoplusnh: 53716
 }
];
        
        var sldl_data = [
 {
   dist: '1',
   chg: -14,
   hisp: 20,
   whitenh: -31,
   blacknh: -21,
   aiannh: 22,
   asiannh: 27,
   nhopinh: -12,
   othernh: 6,
   twoplusnh: -25
 },
 {
   dist: '2',
   chg: -62,
   hisp: -22,
   whitenh: 62,
   blacknh: -5,
   aiannh: -7,
   asiannh: -28,
   nhopinh: 0,
   othernh: 1,
   twoplusnh: -63
 },
 {
   dist: '3',
   chg: -85,
   hisp: -9,
   whitenh: 0,
   blacknh: -3,
   aiannh: 10,
   asiannh: -1,
   nhopinh: -15,
   othernh: -32,
   twoplusnh: -35
 },
 {
   dist: '4',
   chg: 63,
   hisp: 47,
   whitenh: 9,
   blacknh: 15,
   aiannh: 19,
   asiannh: 16,
   nhopinh: 8,
   othernh: 18,
   twoplusnh: -69
 },
 {
   dist: '5',
   chg: -12,
   hisp: -115,
   whitenh: -4,
   blacknh: 77,
   aiannh: 11,
   asiannh: -6,
   nhopinh: 12,
   othernh: -14,
   twoplusnh: 27
 },
 {
   dist: '6',
   chg: -186,
   hisp: -109,
   whitenh: -41,
   blacknh: -12,
   aiannh: -18,
   asiannh: -20,
   nhopinh: 1,
   othernh: 23,
   twoplusnh: -10
 },
 {
   dist: '7',
   chg: 111,
   hisp: 113,
   whitenh: 52,
   blacknh: -61,
   aiannh: 4,
   asiannh: -14,
   nhopinh: 20,
   othernh: 4,
   twoplusnh: -7
 },
 {
   dist: '8',
   chg: 149,
   hisp: 35,
   whitenh: 63,
   blacknh: -7,
   aiannh: -26,
   asiannh: -2,
   nhopinh: -15,
   othernh: -12,
   twoplusnh: 113
 },
 {
   dist: '9',
   chg: 39,
   hisp: 5,
   whitenh: -24,
   blacknh: -10,
   aiannh: -5,
   asiannh: 19,
   nhopinh: -1,
   othernh: -5,
   twoplusnh: 60
 },
 {
   dist: '10',
   chg: 135,
   hisp: 63,
   whitenh: 21,
   blacknh: -11,
   aiannh: 9,
   asiannh: -13,
   nhopinh: 5,
   othernh: 1,
   twoplusnh: 60
 },
 {
   dist: '11',
   chg: -114,
   hisp: -13,
   whitenh: -44,
   blacknh: -28,
   aiannh: 25,
   asiannh: -10,
   nhopinh: 6,
   othernh: 13,
   twoplusnh: -63
 },
 {
   dist: '12',
   chg: 87,
   hisp: 24,
   whitenh: 31,
   blacknh: 7,
   aiannh: 3,
   asiannh: 12,
   nhopinh: -2,
   othernh: -10,
   twoplusnh: 22
 },
 {
   dist: '13',
   chg: -78,
   hisp: -108,
   whitenh: -14,
   blacknh: 20,
   aiannh: -20,
   asiannh: 53,
   nhopinh: 7,
   othernh: -7,
   twoplusnh: -9
 },
 {
   dist: '14',
   chg: 80,
   hisp: -5,
   whitenh: -3,
   blacknh: 20,
   aiannh: 35,
   asiannh: 8,
   nhopinh: -3,
   othernh: 26,
   twoplusnh: 2
 },
 {
   dist: '15',
   chg: 27,
   hisp: 10,
   whitenh: -18,
   blacknh: -29,
   aiannh: -10,
   asiannh: 29,
   nhopinh: 5,
   othernh: 2,
   twoplusnh: 38
 },
 {
   dist: '16',
   chg: -28,
   hisp: 48,
   whitenh: 16,
   blacknh: 4,
   aiannh: -18,
   asiannh: -15,
   nhopinh: -20,
   othernh: 3,
   twoplusnh: -46
 },
 {
   dist: '17',
   chg: 238,
   hisp: 72,
   whitenh: -5,
   blacknh: 34,
   aiannh: 8,
   asiannh: 17,
   nhopinh: -20,
   othernh: -28,
   twoplusnh: 160
 },
 {
   dist: '18',
   chg: -121,
   hisp: 20,
   whitenh: 0,
   blacknh: 35,
   aiannh: -22,
   asiannh: -7,
   nhopinh: 3,
   othernh: -6,
   twoplusnh: -144
 },
 {
   dist: '19',
   chg: 88,
   hisp: 93,
   whitenh: -39,
   blacknh: -29,
   aiannh: 7,
   asiannh: -12,
   nhopinh: 7,
   othernh: 7,
   twoplusnh: 54
 },
 {
   dist: '20',
   chg: -161,
   hisp: -29,
   whitenh: 11,
   blacknh: -43,
   aiannh: -6,
   asiannh: -20,
   nhopinh: -3,
   othernh: -6,
   twoplusnh: -65
 },
 {
   dist: '21',
   chg: -186,
   hisp: -163,
   whitenh: 11,
   blacknh: 0,
   aiannh: -24,
   asiannh: -3,
   nhopinh: 9,
   othernh: 0,
   twoplusnh: -16
 },
 {
   dist: '22',
   chg: -16,
   hisp: -33,
   whitenh: -22,
   blacknh: 25,
   aiannh: -40,
   asiannh: 2,
   nhopinh: -4,
   othernh: 11,
   twoplusnh: 45
 },
 {
   dist: '23',
   chg: 10,
   hisp: -6,
   whitenh: 24,
   blacknh: 8,
   aiannh: -15,
   asiannh: -1,
   nhopinh: 15,
   othernh: -12,
   twoplusnh: -3
 },
 {
   dist: '24',
   chg: 24,
   hisp: 118,
   whitenh: -47,
   blacknh: -19,
   aiannh: 7,
   asiannh: -26,
   nhopinh: 5,
   othernh: 4,
   twoplusnh: -18
 },
 {
   dist: '25',
   chg: -128,
   hisp: -133,
   whitenh: -6,
   blacknh: -1,
   aiannh: 38,
   asiannh: -3,
   nhopinh: -7,
   othernh: -13,
   twoplusnh: -3
 },
 {
   dist: '26',
   chg: 28,
   hisp: -35,
   whitenh: 44,
   blacknh: -20,
   aiannh: 7,
   asiannh: -5,
   nhopinh: 2,
   othernh: 23,
   twoplusnh: 12
 },
 {
   dist: '27',
   chg: 11,
   hisp: 47,
   whitenh: -23,
   blacknh: -26,
   aiannh: 13,
   asiannh: 10,
   nhopinh: 8,
   othernh: -21,
   twoplusnh: 3
 },
 {
   dist: '28',
   chg: -27,
   hisp: -18,
   whitenh: -25,
   blacknh: 33,
   aiannh: -3,
   asiannh: -3,
   nhopinh: 9,
   othernh: 20,
   twoplusnh: -40
 },
 {
   dist: '29',
   chg: 121,
   hisp: 58,
   whitenh: 46,
   blacknh: -1,
   aiannh: 9,
   asiannh: -2,
   nhopinh: -22,
   othernh: -17,
   twoplusnh: 50
 },
 {
   dist: '30',
   chg: 11,
   hisp: -103,
   whitenh: 6,
   blacknh: -3,
   aiannh: -13,
   asiannh: 18,
   nhopinh: 36,
   othernh: -3,
   twoplusnh: 73
 },
 {
   dist: '31',
   chg: -54,
   hisp: 13,
   whitenh: -22,
   blacknh: 10,
   aiannh: 15,
   asiannh: -29,
   nhopinh: -7,
   othernh: 11,
   twoplusnh: -45
 },
 {
   dist: '32',
   chg: -42,
   hisp: 15,
   whitenh: 13,
   blacknh: 0,
   aiannh: -39,
   asiannh: -9,
   nhopinh: 1,
   othernh: -6,
   twoplusnh: -17
 },
 {
   dist: '33',
   chg: -8,
   hisp: -29,
   whitenh: 11,
   blacknh: 11,
   aiannh: -3,
   asiannh: -21,
   nhopinh: -16,
   othernh: 0,
   twoplusnh: 39
 },
 {
   dist: '34',
   chg: 68,
   hisp: 45,
   whitenh: -3,
   blacknh: -2,
   aiannh: 22,
   asiannh: -4,
   nhopinh: -2,
   othernh: 3,
   twoplusnh: 9
 },
 {
   dist: '35',
   chg: 27,
   hisp: 62,
   whitenh: -12,
   blacknh: -5,
   aiannh: -5,
   asiannh: -1,
   nhopinh: -14,
   othernh: 14,
   twoplusnh: -12
 },
 {
   dist: '36',
   chg: 170,
   hisp: 94,
   whitenh: -6,
   blacknh: 19,
   aiannh: 21,
   asiannh: -8,
   nhopinh: 10,
   othernh: 5,
   twoplusnh: 35
 },
 {
   dist: '37',
   chg: -168,
   hisp: -83,
   whitenh: -2,
   blacknh: -10,
   aiannh: 8,
   asiannh: 21,
   nhopinh: 7,
   othernh: -15,
   twoplusnh: -94
 },
 {
   dist: '38',
   chg: -338,
   hisp: -77,
   whitenh: -77,
   blacknh: -1,
   aiannh: -7,
   asiannh: -17,
   nhopinh: -19,
   othernh: 2,
   twoplusnh: -142
 },
 {
   dist: '39',
   chg: -5,
   hisp: -115,
   whitenh: 23,
   blacknh: -7,
   aiannh: -21,
   asiannh: 4,
   nhopinh: -18,
   othernh: 14,
   twoplusnh: 115
 },
 {
   dist: '40',
   chg: 100,
   hisp: 61,
   whitenh: -4,
   blacknh: 14,
   aiannh: -34,
   asiannh: -11,
   nhopinh: 15,
   othernh: 8,
   twoplusnh: 51
 },
 {
   dist: '41',
   chg: 64,
   hisp: 63,
   whitenh: -6,
   blacknh: -37,
   aiannh: 14,
   asiannh: 10,
   nhopinh: -21,
   othernh: 5,
   twoplusnh: 36
 },
 {
   dist: '42',
   chg: 152,
   hisp: 39,
   whitenh: 34,
   blacknh: 20,
   aiannh: -6,
   asiannh: 9,
   nhopinh: 34,
   othernh: -20,
   twoplusnh: 42
 },
 {
   dist: '43',
   chg: 3,
   hisp: 28,
   whitenh: 0,
   blacknh: -7,
   aiannh: -10,
   asiannh: -19,
   nhopinh: -18,
   othernh: -15,
   twoplusnh: 44
 },
 {
   dist: '44',
   chg: 12,
   hisp: 10,
   whitenh: -4,
   blacknh: -16,
   aiannh: 11,
   asiannh: 9,
   nhopinh: 8,
   othernh: -10,
   twoplusnh: 4
 },
 {
   dist: '45',
   chg: -38,
   hisp: -22,
   whitenh: -35,
   blacknh: 31,
   aiannh: -16,
   asiannh: -4,
   nhopinh: 5,
   othernh: 16,
   twoplusnh: -13
 },
 {
   dist: '46',
   chg: -67,
   hisp: -57,
   whitenh: 14,
   blacknh: -1,
   aiannh: 11,
   asiannh: -14,
   nhopinh: -10,
   othernh: -29,
   twoplusnh: 19
 },
 {
   dist: '47',
   chg: 38,
   hisp: 15,
   whitenh: 6,
   blacknh: 20,
   aiannh: -17,
   asiannh: -6,
   nhopinh: 15,
   othernh: 15,
   twoplusnh: -10
 },
 {
   dist: '48',
   chg: -212,
   hisp: -149,
   whitenh: -13,
   blacknh: -19,
   aiannh: -27,
   asiannh: 3,
   nhopinh: -17,
   othernh: 13,
   twoplusnh: -3
 },
 {
   dist: '49',
   chg: -151,
   hisp: -43,
   whitenh: -34,
   blacknh: -5,
   aiannh: -47,
   asiannh: -20,
   nhopinh: -4,
   othernh: -3,
   twoplusnh: 5
 },
 {
   dist: '50',
   chg: 216,
   hisp: 184,
   whitenh: 15,
   blacknh: 9,
   aiannh: 16,
   asiannh: 4,
   nhopinh: 11,
   othernh: 6,
   twoplusnh: -29
 },
 {
   dist: '51',
   chg: 14,
   hisp: -3,
   whitenh: -10,
   blacknh: -17,
   aiannh: -14,
   asiannh: 35,
   nhopinh: 8,
   othernh: -1,
   twoplusnh: 16
 },
 {
   dist: '52',
   chg: -37,
   hisp: -37,
   whitenh: 49,
   blacknh: 25,
   aiannh: 29,
   asiannh: -18,
   nhopinh: -16,
   othernh: -34,
   twoplusnh: -35
 },
 {
   dist: '53',
   chg: 124,
   hisp: 36,
   whitenh: -47,
   blacknh: 0,
   aiannh: 30,
   asiannh: 15,
   nhopinh: 15,
   othernh: 15,
   twoplusnh: 60
 },
 {
   dist: '54',
   chg: -40,
   hisp: 78,
   whitenh: -80,
   blacknh: 21,
   aiannh: -7,
   asiannh: -10,
   nhopinh: -4,
   othernh: -7,
   twoplusnh: -31
 },
 {
   dist: '55',
   chg: 11,
   hisp: -45,
   whitenh: 37,
   blacknh: -14,
   aiannh: -10,
   asiannh: 15,
   nhopinh: -4,
   othernh: 2,
   twoplusnh: 30
 },
 {
   dist: '56',
   chg: -2,
   hisp: -52,
   whitenh: 17,
   blacknh: 9,
   aiannh: 6,
   asiannh: -5,
   nhopinh: 4,
   othernh: -1,
   twoplusnh: 20
 },
 {
   dist: '57',
   chg: -15,
   hisp: -17,
   whitenh: -36,
   blacknh: 28,
   aiannh: -19,
   asiannh: 10,
   nhopinh: 10,
   othernh: 1,
   twoplusnh: 8
 },
 {
   dist: '58',
   chg: 26,
   hisp: 63,
   whitenh: -18,
   blacknh: -13,
   aiannh: -20,
   asiannh: 5,
   nhopinh: -8,
   othernh: 4,
   twoplusnh: 13
 },
 {
   dist: '59',
   chg: -65,
   hisp: 27,
   whitenh: 14,
   blacknh: 2,
   aiannh: -12,
   asiannh: -24,
   nhopinh: -10,
   othernh: -9,
   twoplusnh: -53
 },
 {
   dist: '60',
   chg: 16,
   hisp: 59,
   whitenh: -105,
   blacknh: 12,
   aiannh: 14,
   asiannh: 28,
   nhopinh: 0,
   othernh: 8,
   twoplusnh: 0
 },
 {
   dist: '61',
   chg: 5,
   hisp: 27,
   whitenh: 4,
   blacknh: 0,
   aiannh: -9,
   asiannh: -2,
   nhopinh: -19,
   othernh: 1,
   twoplusnh: 3
 },
 {
   dist: '62',
   chg: 16,
   hisp: -49,
   whitenh: 91,
   blacknh: -17,
   aiannh: 68,
   asiannh: -3,
   nhopinh: -4,
   othernh: 1,
   twoplusnh: -71
 },
 {
   dist: '63',
   chg: 20,
   hisp: -29,
   whitenh: 41,
   blacknh: 12,
   aiannh: 3,
   asiannh: 28,
   nhopinh: 0,
   othernh: 9,
   twoplusnh: -44
 },
 {
   dist: '64',
   chg: -2,
   hisp: -42,
   whitenh: 70,
   blacknh: -24,
   aiannh: 22,
   asiannh: -8,
   nhopinh: -3,
   othernh: 17,
   twoplusnh: -34
 },
 {
   dist: '65',
   chg: 142,
   hisp: 38,
   whitenh: 27,
   blacknh: 6,
   aiannh: 32,
   asiannh: 9,
   nhopinh: 6,
   othernh: -8,
   twoplusnh: 32
 }
];
        
        var sldl_sf1 = [
 {
   dist: '1',   hisp: 24287,   whitenh: 26927,   blacknh: 805,   aiannh: 420,   asiannh: 2778,   nhopinh: 47,   othernh: 88,   twoplusnh: 541
 }, {
   dist: '2',   hisp: 6392,   whitenh: 55990,   blacknh: 1782,   aiannh: 324,   asiannh: 1945,   nhopinh: 39,   othernh: 107,   twoplusnh: 1201
 }, {
   dist: '3',   hisp: 7915,   whitenh: 46804,   blacknh: 1073,   aiannh: 351,   asiannh: 2244,   nhopinh: 54,   othernh: 83,   twoplusnh: 849
 }, {
   dist: '4',   hisp: 26492,   whitenh: 27267,   blacknh: 1032,   aiannh: 518,   asiannh: 1028,   nhopinh: 26,   othernh: 112,   twoplusnh: 585
 }, {
   dist: '5',   hisp: 26206,   whitenh: 26828,   blacknh: 2694,   aiannh: 497,   asiannh: 1808,   nhopinh: 50,   othernh: 107,   twoplusnh: 845
 }, {
   dist: '6',   hisp: 5758,   whitenh: 45705,   blacknh: 5843,   aiannh: 209,   asiannh: 2583,   nhopinh: 44,   othernh: 103,   twoplusnh: 966
 }, {
   dist: '7',   hisp: 19015,   whitenh: 15216,   blacknh: 14476,   aiannh: 235,   asiannh: 2004,   nhopinh: 97,   othernh: 85,   twoplusnh: 1075
 }, {
   dist: '8',   hisp: 9619,   whitenh: 36622,   blacknh: 12035,   aiannh: 348,   asiannh: 1183,   nhopinh: 28,   othernh: 128,   twoplusnh: 1356
 }, {
   dist: '9',   hisp: 8403,   whitenh: 44331,   blacknh: 5328,   aiannh: 277,   asiannh: 2871,   nhopinh: 45,   othernh: 129,   twoplusnh: 1277
 }, {
   dist: '10',   hisp: 5327,   whitenh: 53643,   blacknh: 670,   aiannh: 202,   asiannh: 3414,   nhopinh: 45,   othernh: 120,   twoplusnh: 1117
 }, {
   dist: '11',   hisp: 8914,   whitenh: 45604,   blacknh: 368,   aiannh: 267,   asiannh: 1591,   nhopinh: 30,   othernh: 47,   twoplusnh: 594
 }, {
   dist: '12',   hisp: 8412,   whitenh: 44117,   blacknh: 421,   aiannh: 230,   asiannh: 1893,   nhopinh: 21,   othernh: 75,   twoplusnh: 611
 }, {
   dist: '13',   hisp: 2794,   whitenh: 58517,   blacknh: 322,   aiannh: 236,   asiannh: 1163,   nhopinh: 35,   othernh: 70,   twoplusnh: 783
 }, {
   dist: '14',   hisp: 4429,   whitenh: 43841,   blacknh: 1898,   aiannh: 256,   asiannh: 2407,   nhopinh: 96,   othernh: 72,   twoplusnh: 1109
 }, {
   dist: '15',   hisp: 6503,   whitenh: 39356,   blacknh: 3370,   aiannh: 269,   asiannh: 2156,   nhopinh: 183,   othernh: 101,   twoplusnh: 1300
 }, {
   dist: '16',   hisp: 7130,   whitenh: 48106,   blacknh: 2466,   aiannh: 363,   asiannh: 1343,   nhopinh: 99,   othernh: 98,   twoplusnh: 1236
 }, {
   dist: '17',   hisp: 15674,   whitenh: 28102,   blacknh: 7747,   aiannh: 420,   asiannh: 1727,   nhopinh: 266,   othernh: 107,   twoplusnh: 1793
 }, {
   dist: '18',   hisp: 7567,   whitenh: 51630,   blacknh: 2543,   aiannh: 475,   asiannh: 970,   nhopinh: 79,   othernh: 93,   twoplusnh: 1393
 }, {
   dist: '19',   hisp: 3199,   whitenh: 49241,   blacknh: 846,   aiannh: 299,   asiannh: 844,   nhopinh: 49,   othernh: 67,   twoplusnh: 908
 }, {
   dist: '20',   hisp: 5371,   whitenh: 50984,   blacknh: 1946,   aiannh: 250,   asiannh: 2054,   nhopinh: 140,   othernh: 80,   twoplusnh: 1278
 }, {
   dist: '21',   hisp: 7916,   whitenh: 36255,   blacknh: 5104,   aiannh: 437,   asiannh: 1523,   nhopinh: 436,   othernh: 78,   twoplusnh: 1509
 }, {
   dist: '22',   hisp: 4536,   whitenh: 49643,   blacknh: 361,   aiannh: 178,   asiannh: 1446,   nhopinh: 30,   othernh: 65,   twoplusnh: 567
 }, {
   dist: '23',   hisp: 9720,   whitenh: 49042,   blacknh: 822,   aiannh: 436,   asiannh: 1426,   nhopinh: 65,   othernh: 59,   twoplusnh: 782
 }, {
   dist: '24',   hisp: 7986,   whitenh: 49975,   blacknh: 593,   aiannh: 338,   asiannh: 1421,   nhopinh: 50,   othernh: 64,   twoplusnh: 756
 }, {
   dist: '25',   hisp: 2678,   whitenh: 54896,   blacknh: 222,   aiannh: 178,   asiannh: 712,   nhopinh: 30,   othernh: 60,   twoplusnh: 485
 }, {
   dist: '26',   hisp: 11193,   whitenh: 45357,   blacknh: 284,   aiannh: 159,   asiannh: 498,   nhopinh: 30,   othernh: 73,   twoplusnh: 403
 }, {
   dist: '27',   hisp: 5085,   whitenh: 51636,   blacknh: 339,   aiannh: 223,   asiannh: 963,   nhopinh: 21,   othernh: 50,   twoplusnh: 605
 }, {
   dist: '28',   hisp: 12146,   whitenh: 42737,   blacknh: 840,   aiannh: 409,   asiannh: 2258,   nhopinh: 50,   othernh: 87,   twoplusnh: 731
 }, {
   dist: '29',   hisp: 7932,   whitenh: 45694,   blacknh: 568,   aiannh: 245,   asiannh: 2196,   nhopinh: 50,   othernh: 66,   twoplusnh: 724
 }, {
   dist: '30',   hisp: 18956,   whitenh: 26218,   blacknh: 4780,   aiannh: 299,   asiannh: 2131,   nhopinh: 122,   othernh: 59,   twoplusnh: 829
 }, {
   dist: '31',   hisp: 16823,   whitenh: 35261,   blacknh: 890,   aiannh: 329,   asiannh: 1955,   nhopinh: 52,   othernh: 79,   twoplusnh: 702
 }, {
   dist: '32',   hisp: 27024,   whitenh: 22952,   blacknh: 914,   aiannh: 378,   asiannh: 1163,   nhopinh: 51,   othernh: 80,   twoplusnh: 540
 }, {
   dist: '33',   hisp: 4868,   whitenh: 46067,   blacknh: 504,   aiannh: 214,   asiannh: 3926,   nhopinh: 38,   othernh: 49,   twoplusnh: 693
 }, {
   dist: '34',   hisp: 16172,   whitenh: 35147,   blacknh: 952,   aiannh: 368,   asiannh: 2294,   nhopinh: 44,   othernh: 78,   twoplusnh: 721
 }, {
   dist: '35',   hisp: 15476,   whitenh: 39280,   blacknh: 795,   aiannh: 296,   asiannh: 3082,   nhopinh: 46,   othernh: 87,   twoplusnh: 681
 }, {
   dist: '36',   hisp: 9971,   whitenh: 29816,   blacknh: 8136,   aiannh: 257,   asiannh: 3620,   nhopinh: 140,   othernh: 82,   twoplusnh: 1184
 }, {
   dist: '37',   hisp: 4182,   whitenh: 43774,   blacknh: 2835,   aiannh: 144,   asiannh: 4191,   nhopinh: 62,   othernh: 56,   twoplusnh: 919
 }, {
   dist: '38',   hisp: 3599,   whitenh: 55175,   blacknh: 581,   aiannh: 212,   asiannh: 1177,   nhopinh: 47,   othernh: 35,   twoplusnh: 591
 }, {
   dist: '39',   hisp: 2712,   whitenh: 50649,   blacknh: 350,   aiannh: 235,   asiannh: 1557,   nhopinh: 32,   othernh: 53,   twoplusnh: 665
 }, {
   dist: '40',   hisp: 7535,   whitenh: 37554,   blacknh: 6235,   aiannh: 256,   asiannh: 3610,   nhopinh: 157,   othernh: 81,   twoplusnh: 1217
 }, {
   dist: '41',   hisp: 9425,   whitenh: 35753,   blacknh: 8846,   aiannh: 252,   asiannh: 3169,   nhopinh: 54,   othernh: 137,   twoplusnh: 1284
 }, {
   dist: '42',   hisp: 20096,   whitenh: 19933,   blacknh: 10514,   aiannh: 305,   asiannh: 2279,   nhopinh: 178,   othernh: 74,   twoplusnh: 1194
 }, {
   dist: '43',   hisp: 3439,   whitenh: 45516,   blacknh: 612,   aiannh: 161,   asiannh: 2506,   nhopinh: 20,   othernh: 53,   twoplusnh: 643
 }, {
   dist: '44',   hisp: 3882,   whitenh: 47000,   blacknh: 872,   aiannh: 152,   asiannh: 2412,   nhopinh: 46,   othernh: 43,   twoplusnh: 749
 }, {
   dist: '45',   hisp: 3617,   whitenh: 46619,   blacknh: 560,   aiannh: 181,   asiannh: 985,   nhopinh: 42,   othernh: 71,   twoplusnh: 589
 }, {
   dist: '46',   hisp: 21380,   whitenh: 35988,   blacknh: 983,   aiannh: 322,   asiannh: 335,   nhopinh: 29,   othernh: 79,   twoplusnh: 620
 }, {
   dist: '47',   hisp: 18291,   whitenh: 39147,   blacknh: 976,   aiannh: 401,   asiannh: 566,   nhopinh: 44,   othernh: 93,   twoplusnh: 728
 }, {
   dist: '48',   hisp: 10099,   whitenh: 44906,   blacknh: 225,   aiannh: 203,   asiannh: 520,   nhopinh: 39,   othernh: 59,   twoplusnh: 537
 }, {
   dist: '49',   hisp: 4044,   whitenh: 55391,   blacknh: 203,   aiannh: 230,   asiannh: 500,   nhopinh: 28,   othernh: 47,   twoplusnh: 549
 }, {
   dist: '50',   hisp: 21944,   whitenh: 32662,   blacknh: 953,   aiannh: 326,   asiannh: 700,   nhopinh: 50,   othernh: 106,   twoplusnh: 664
 }, {
   dist: '51',   hisp: 5360,   whitenh: 53422,   blacknh: 250,   aiannh: 276,   asiannh: 589,   nhopinh: 24,   othernh: 38,   twoplusnh: 558
 }, {
   dist: '52',   hisp: 6490,   whitenh: 51543,   blacknh: 479,   aiannh: 241,   asiannh: 1611,   nhopinh: 39,   othernh: 85,   twoplusnh: 787
 }, {
   dist: '53',   hisp: 5406,   whitenh: 55260,   blacknh: 807,   aiannh: 253,   asiannh: 1715,   nhopinh: 70,   othernh: 71,   twoplusnh: 1208
 }, {
   dist: '54',   hisp: 7020,   whitenh: 50185,   blacknh: 310,   aiannh: 411,   asiannh: 320,   nhopinh: 52,   othernh: 43,   twoplusnh: 633
 }, {
   dist: '55',   hisp: 6959,   whitenh: 52778,   blacknh: 365,   aiannh: 360,   asiannh: 571,   nhopinh: 69,   othernh: 50,   twoplusnh: 735
 }, {
   dist: '56',   hisp: 11220,   whitenh: 41130,   blacknh: 1170,   aiannh: 273,   asiannh: 1621,   nhopinh: 38,   othernh: 43,   twoplusnh: 667
 }, {
   dist: '57',   hisp: 11356,   whitenh: 43385,   blacknh: 239,   aiannh: 322,   asiannh: 340,   nhopinh: 36,   othernh: 65,   twoplusnh: 537
 }, {
   dist: '58',   hisp: 7193,   whitenh: 47680,   blacknh: 134,   aiannh: 2156,   asiannh: 311,   nhopinh: 33,   othernh: 58,   twoplusnh: 582
 }, {
   dist: '59',   hisp: 6422,   whitenh: 51987,   blacknh: 201,   aiannh: 2144,   asiannh: 342,   nhopinh: 29,   othernh: 78,   twoplusnh: 861
 }, {
   dist: '60',   hisp: 6324,   whitenh: 55222,   blacknh: 2091,   aiannh: 780,   asiannh: 381,   nhopinh: 16,   othernh: 39,   twoplusnh: 647
 }, {
   dist: '61',   hisp: 6910,   whitenh: 55426,   blacknh: 289,   aiannh: 209,   asiannh: 522,   nhopinh: 33,   othernh: 70,   twoplusnh: 597
 }, {
   dist: '62',   hisp: 27350,   whitenh: 29684,   blacknh: 400,   aiannh: 521,   asiannh: 342,   nhopinh: 34,   othernh: 97,   twoplusnh: 574
 }, {
   dist: '63',   hisp: 10807,   whitenh: 43088,   blacknh: 327,   aiannh: 592,   asiannh: 892,   nhopinh: 27,   othernh: 57,   twoplusnh: 636
 }, {
   dist: '64',   hisp: 12156,   whitenh: 45889,   blacknh: 1674,   aiannh: 512,   asiannh: 365,   nhopinh: 24,   othernh: 40,   twoplusnh: 516
 }, {
   dist: '65',   hisp: 11355,   whitenh: 44960,   blacknh: 1561,   aiannh: 326,   asiannh: 290,   nhopinh: 24,   othernh: 41,   twoplusnh: 346
 }, {
   dist: 'CO',   hisp: 664462,   whitenh: 2810513,   blacknh: 138811,   aiannh: 23946,   asiannh: 103339,   nhopinh: 4104,   othernh: 4850,   twoplusnh: 53562
 }
];
        
var sldl_dp = [
 {
   dist: '1',
   hisp: 19780,
   whitenh: 27802,
   blacknh: 874,
   aiannh: 361,
   asiannh: 2344,
   nhopinh: 57,
   othernh: 69,
   twoplusnh: 578
 },
 {
   dist: '2',
   hisp: 24477,
   whitenh: 17694,
   blacknh: 1201,
   aiannh: 436,
   asiannh: 1758,
   nhopinh: 35,
   othernh: 93,
   twoplusnh: 547
 },
 {
   dist: '3',
   hisp: 5452,
   whitenh: 47210,
   blacknh: 959,
   aiannh: 278,
   asiannh: 1732,
   nhopinh: 62,
   othernh: 120,
   twoplusnh: 896
 },
 {
   dist: '4',
   hisp: 20448,
   whitenh: 24186,
   blacknh: 732,
   aiannh: 405,
   asiannh: 764,
   nhopinh: 17,
   othernh: 76,
   twoplusnh: 581
 },
 {
   dist: '5',
   hisp: 17475,
   whitenh: 37920,
   blacknh: 3073,
   aiannh: 427,
   asiannh: 1444,
   nhopinh: 33,
   othernh: 118,
   twoplusnh: 1117
 },
 {
   dist: '6',
   hisp: 6142,
   whitenh: 48096,
   blacknh: 4700,
   aiannh: 232,
   asiannh: 2173,
   nhopinh: 45,
   othernh: 87,
   twoplusnh: 960
 },
 {
   dist: '7',
   hisp: 21422,
   whitenh: 27225,
   blacknh: 16878,
   aiannh: 329,
   asiannh: 3040,
   nhopinh: 90,
   othernh: 109,
   twoplusnh: 1440
 },
 {
   dist: '8',
   hisp: 8222,
   whitenh: 29613,
   blacknh: 11236,
   aiannh: 321,
   asiannh: 965,
   nhopinh: 39,
   othernh: 127,
   twoplusnh: 1075
 },
 {
   dist: '9',
   hisp: 6993,
   whitenh: 38700,
   blacknh: 4929,
   aiannh: 233,
   asiannh: 2518,
   nhopinh: 36,
   othernh: 115,
   twoplusnh: 1056
 },
 {
   dist: '10',
   hisp: 4176,
   whitenh: 48805,
   blacknh: 625,
   aiannh: 183,
   asiannh: 3149,
   nhopinh: 34,
   othernh: 99,
   twoplusnh: 975
 },
 {
   dist: '11',
   hisp: 8274,
   whitenh: 48605,
   blacknh: 448,
   aiannh: 233,
   asiannh: 2032,
   nhopinh: 28,
   othernh: 48,
   twoplusnh: 685
 },
 {
   dist: '12',
   hisp: 9259,
   whitenh: 39896,
   blacknh: 385,
   aiannh: 224,
   asiannh: 1516,
   nhopinh: 20,
   othernh: 80,
   twoplusnh: 580
 },
 {
   dist: '13',
   hisp: 2956,
   whitenh: 52720,
   blacknh: 296,
   aiannh: 224,
   asiannh: 1214,
   nhopinh: 27,
   othernh: 82,
   twoplusnh: 750
 },
 {
   dist: '14',
   hisp: 4571,
   whitenh: 43798,
   blacknh: 2040,
   aiannh: 232,
   asiannh: 1776,
   nhopinh: 94,
   othernh: 48,
   twoplusnh: 1138
 },
 {
   dist: '15',
   hisp: 9278,
   whitenh: 50839,
   blacknh: 4161,
   aiannh: 384,
   asiannh: 2380,
   nhopinh: 203,
   othernh: 106,
   twoplusnh: 1637
 },
 {
   dist: '16',
   hisp: 7177,
   whitenh: 38779,
   blacknh: 2293,
   aiannh: 376,
   asiannh: 1000,
   nhopinh: 94,
   othernh: 77,
   twoplusnh: 1100
 },
 {
   dist: '17',
   hisp: 12920,
   whitenh: 28138,
   blacknh: 7491,
   aiannh: 411,
   asiannh: 1710,
   nhopinh: 364,
   othernh: 121,
   twoplusnh: 1535
 },
 {
   dist: '18',
   hisp: 7732,
   whitenh: 41277,
   blacknh: 2544,
   aiannh: 418,
   asiannh: 812,
   nhopinh: 78,
   othernh: 89,
   twoplusnh: 1337
 },
 {
   dist: '19',
   hisp: 7559,
   whitenh: 41285,
   blacknh: 4337,
   aiannh: 419,
   asiannh: 1422,
   nhopinh: 355,
   othernh: 80,
   twoplusnh: 1504
 },
 {
   dist: '20',
   hisp: 4515,
   whitenh: 64908,
   blacknh: 1651,
   aiannh: 292,
   asiannh: 2391,
   nhopinh: 88,
   othernh: 123,
   twoplusnh: 1432
 },
 {
   dist: '21',
   hisp: 4367,
   whitenh: 43511,
   blacknh: 1429,
   aiannh: 325,
   asiannh: 1555,
   nhopinh: 95,
   othernh: 61,
   twoplusnh: 940
 },
 {
   dist: '22',
   hisp: 6055,
   whitenh: 42696,
   blacknh: 599,
   aiannh: 351,
   asiannh: 2007,
   nhopinh: 47,
   othernh: 54,
   twoplusnh: 542
 },
 {
   dist: '23',
   hisp: 7849,
   whitenh: 41483,
   blacknh: 717,
   aiannh: 369,
   asiannh: 1434,
   nhopinh: 36,
   othernh: 63,
   twoplusnh: 670
 },
 {
   dist: '24',
   hisp: 9764,
   whitenh: 39156,
   blacknh: 534,
   aiannh: 342,
   asiannh: 754,
   nhopinh: 41,
   othernh: 54,
   twoplusnh: 635
 },
 {
   dist: '25',
   hisp: 2330,
   whitenh: 52028,
   blacknh: 186,
   aiannh: 120,
   asiannh: 703,
   nhopinh: 29,
   othernh: 64,
   twoplusnh: 431
 },
 {
   dist: '26',
   hisp: 9447,
   whitenh: 39380,
   blacknh: 590,
   aiannh: 296,
   asiannh: 1614,
   nhopinh: 38,
   othernh: 55,
   twoplusnh: 691
 },
 {
   dist: '27',
   hisp: 5155,
   whitenh: 43955,
   blacknh: 335,
   aiannh: 176,
   asiannh: 871,
   nhopinh: 19,
   othernh: 63,
   twoplusnh: 532
 },
 {
   dist: '28',
   hisp: 3797,
   whitenh: 44093,
   blacknh: 281,
   aiannh: 151,
   asiannh: 1068,
   nhopinh: 20,
   othernh: 31,
   twoplusnh: 531
 },
 {
   dist: '29',
   hisp: 5687,
   whitenh: 40831,
   blacknh: 504,
   aiannh: 186,
   asiannh: 1999,
   nhopinh: 60,
   othernh: 72,
   twoplusnh: 572
 },
 {
   dist: '30',
   hisp: 22144,
   whitenh: 28262,
   blacknh: 4570,
   aiannh: 361,
   asiannh: 1426,
   nhopinh: 85,
   othernh: 64,
   twoplusnh: 712
 },
 {
   dist: '31',
   hisp: 13959,
   whitenh: 52048,
   blacknh: 1150,
   aiannh: 382,
   asiannh: 3221,
   nhopinh: 67,
   othernh: 68,
   twoplusnh: 1009
 },
 {
   dist: '32',
   hisp: 29122,
   whitenh: 34667,
   blacknh: 1462,
   aiannh: 447,
   asiannh: 1684,
   nhopinh: 52,
   othernh: 103,
   twoplusnh: 836
 },
 {
   dist: '33',
   hisp: 6396,
   whitenh: 55875,
   blacknh: 677,
   aiannh: 273,
   asiannh: 4475,
   nhopinh: 66,
   othernh: 67,
   twoplusnh: 823
 },
 {
   dist: '34',
   hisp: 18386,
   whitenh: 30939,
   blacknh: 741,
   aiannh: 304,
   asiannh: 2097,
   nhopinh: 58,
   othernh: 83,
   twoplusnh: 579
 },
 {
   dist: '35',
   hisp: 19064,
   whitenh: 26452,
   blacknh: 590,
   aiannh: 331,
   asiannh: 2356,
   nhopinh: 49,
   othernh: 58,
   twoplusnh: 523
 },
 {
   dist: '36',
   hisp: 11697,
   whitenh: 29843,
   blacknh: 9764,
   aiannh: 296,
   asiannh: 3275,
   nhopinh: 174,
   othernh: 67,
   twoplusnh: 1308
 },
 {
   dist: '37',
   hisp: 2524,
   whitenh: 43313,
   blacknh: 483,
   aiannh: 130,
   asiannh: 1251,
   nhopinh: 29,
   othernh: 54,
   twoplusnh: 598
 },
 {
   dist: '38',
   hisp: 5268,
   whitenh: 46634,
   blacknh: 794,
   aiannh: 248,
   asiannh: 1607,
   nhopinh: 51,
   othernh: 48,
   twoplusnh: 803
 },
 {
   dist: '39',
   hisp: 6437,
   whitenh: 55650,
   blacknh: 4864,
   aiannh: 226,
   asiannh: 6413,
   nhopinh: 112,
   othernh: 81,
   twoplusnh: 1209
 },
 {
   dist: '40',
   hisp: 6738,
   whitenh: 53161,
   blacknh: 4080,
   aiannh: 335,
   asiannh: 3076,
   nhopinh: 99,
   othernh: 63,
   twoplusnh: 1085
 },
 {
   dist: '41',
   hisp: 9057,
   whitenh: 34170,
   blacknh: 9386,
   aiannh: 224,
   asiannh: 3209,
   nhopinh: 81,
   othernh: 122,
   twoplusnh: 1236
 },
 {
   dist: '42',
   hisp: 18871,
   whitenh: 17775,
   blacknh: 9200,
   aiannh: 288,
   asiannh: 1991,
   nhopinh: 130,
   othernh: 90,
   twoplusnh: 1017
 },
 {
   dist: '43',
   hisp: 3797,
   whitenh: 51162,
   blacknh: 689,
   aiannh: 181,
   asiannh: 3297,
   nhopinh: 41,
   othernh: 79,
   twoplusnh: 696
 },
 {
   dist: '44',
   hisp: 5053,
   whitenh: 67078,
   blacknh: 1059,
   aiannh: 208,
   asiannh: 3012,
   nhopinh: 51,
   othernh: 77,
   twoplusnh: 981
 },
 {
   dist: '45',
   hisp: 4784,
   whitenh: 71583,
   blacknh: 638,
   aiannh: 355,
   asiannh: 1165,
   nhopinh: 53,
   othernh: 73,
   twoplusnh: 934
 },
 {
   dist: '46',
   hisp: 21395,
   whitenh: 26631,
   blacknh: 1111,
   aiannh: 300,
   asiannh: 316,
   nhopinh: 43,
   othernh: 106,
   twoplusnh: 531
 },
 {
   dist: '47',
   hisp: 15874,
   whitenh: 42480,
   blacknh: 2145,
   aiannh: 608,
   asiannh: 617,
   nhopinh: 32,
   othernh: 55,
   twoplusnh: 658
 },
 {
   dist: '48',
   hisp: 13915,
   whitenh: 63807,
   blacknh: 390,
   aiannh: 327,
   asiannh: 1211,
   nhopinh: 54,
   othernh: 76,
   twoplusnh: 819
 },
 {
   dist: '49',
   hisp: 4552,
   whitenh: 57404,
   blacknh: 225,
   aiannh: 296,
   asiannh: 735,
   nhopinh: 36,
   othernh: 55,
   twoplusnh: 598
 },
 {
   dist: '50',
   hisp: 21609,
   whitenh: 32545,
   blacknh: 940,
   aiannh: 290,
   asiannh: 691,
   nhopinh: 41,
   othernh: 98,
   twoplusnh: 705
 },
 {
   dist: '51',
   hisp: 5384,
   whitenh: 54192,
   blacknh: 273,
   aiannh: 290,
   asiannh: 573,
   nhopinh: 15,
   othernh: 39,
   twoplusnh: 551
 },
 {
   dist: '52',
   hisp: 6940,
   whitenh: 52958,
   blacknh: 471,
   aiannh: 225,
   asiannh: 1482,
   nhopinh: 53,
   othernh: 112,
   twoplusnh: 851
 },
 {
   dist: '53',
   hisp: 4365,
   whitenh: 49518,
   blacknh: 765,
   aiannh: 186,
   asiannh: 1610,
   nhopinh: 54,
   othernh: 56,
   twoplusnh: 1044
 },
 {
   dist: '54',
   hisp: 7374,
   whitenh: 56423,
   blacknh: 301,
   aiannh: 437,
   asiannh: 409,
   nhopinh: 64,
   othernh: 71,
   twoplusnh: 746
 },
 {
   dist: '55',
   hisp: 6974,
   whitenh: 51993,
   blacknh: 374,
   aiannh: 379,
   asiannh: 505,
   nhopinh: 69,
   othernh: 32,
   twoplusnh: 688
 },
 {
   dist: '56',
   hisp: 12943,
   whitenh: 47294,
   blacknh: 377,
   aiannh: 173,
   asiannh: 564,
   nhopinh: 25,
   othernh: 97,
   twoplusnh: 439
 },
 {
   dist: '57',
   hisp: 6157,
   whitenh: 52076,
   blacknh: 229,
   aiannh: 343,
   asiannh: 353,
   nhopinh: 38,
   othernh: 39,
   twoplusnh: 573
 },
 {
   dist: '58',
   hisp: 6712,
   whitenh: 51239,
   blacknh: 145,
   aiannh: 1369,
   asiannh: 286,
   nhopinh: 44,
   othernh: 61,
   twoplusnh: 592
 },
 {
   dist: '59',
   hisp: 6820,
   whitenh: 50582,
   blacknh: 181,
   aiannh: 2980,
   asiannh: 375,
   nhopinh: 40,
   othernh: 79,
   twoplusnh: 886
 },
 {
   dist: '60',
   hisp: 4207,
   whitenh: 51981,
   blacknh: 640,
   aiannh: 492,
   asiannh: 310,
   nhopinh: 14,
   othernh: 29,
   twoplusnh: 629
 },
 {
   dist: '61',
   hisp: 10802,
   whitenh: 49085,
   blacknh: 220,
   aiannh: 205,
   asiannh: 531,
   nhopinh: 39,
   othernh: 73,
   twoplusnh: 539
 },
 {
   dist: '62',
   hisp: 24777,
   whitenh: 22186,
   blacknh: 430,
   aiannh: 362,
   asiannh: 247,
   nhopinh: 23,
   othernh: 93,
   twoplusnh: 531
 },
 {
   dist: '63',
   hisp: 10514,
   whitenh: 39345,
   blacknh: 1565,
   aiannh: 302,
   asiannh: 237,
   nhopinh: 17,
   othernh: 24,
   twoplusnh: 391
 },
 {
   dist: '64',
   hisp: 15935,
   whitenh: 30930,
   blacknh: 830,
   aiannh: 398,
   asiannh: 266,
   nhopinh: 19,
   othernh: 31,
   twoplusnh: 459
 },
 {
   dist: '65',
   hisp: 10657,
   whitenh: 44601,
   blacknh: 1021,
   aiannh: 662,
   asiannh: 329,
   nhopinh: 33,
   othernh: 55,
   twoplusnh: 465
 },
 {
   dist: 'CO',
   hisp: 664482,
   whitenh: 2810511,
   blacknh: 138808,
   aiannh: 23947,
   asiannh: 103347,
   nhopinh: 4135,
   othernh: 4862,
   twoplusnh: 53511
 }
];


       
      var brew = new classyBrew();
      geo = cd; 
      //var DISTNUM = "CD113FP";
      dist = "CD113";
      distnum = 7
      chgdata = cd_data;
      datasf1 = cd_sf1; 
      dataDP = cd_dp;

 
      //*************************************** Begin bar chart construction ****************************************
        var w = document.getElementById('rtSide').offsetWidth * 0.95,
        // h = w * 0.4,
        h = document.getElementById('sf1Bar').offsetHeight,
        h2 = h - 80;
        
        var svg = d3.select('#sf1Bar').append('svg')
          .attr("height", h)	
          .attr("width", w);

        var g = svg.append("g").attr("transform", "translate(40, 20)");

        var svg1 = d3.select('#dpBar').append('svg')
          .attr("height", h)	
          .attr("width", w);

        var g1 = svg1.append("g").attr("transform", "translate(40, 20)");

        var svg2 = d3.select('#diffBar').append('svg')
          .attr("height", h)	
          .attr("width", w);

        var g2 = svg2.append("g").attr("transform", "translate(40, 20)");

        var x = d3.scaleBand().range([0, w - 60]).padding(0.2),
            y = d3.scaleLinear().rangeRound([h2, 0]);

        
        var svg3 = d3.select('#chgTotal').append('svg')
          .attr("height", 20)	
          .attr("width", w);

        var g3 = svg3.append("g").attr("transform", "translate(40, 15)");
        
        function make_y_gridlines() {
		      return d3.axisLeft(y).ticks(8)
	      }

      //*************************************************************************************************************
      //* SF1 BAR CHART ******
      //*************************************************************************************************************

        var nest = d3.nest().key(function(d) {return d.dist; }).entries(datasf1); //console.log(nest);
        
        var barChart = function(geo) {
          var caNest = nest.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
          values2 = caNest[0].values; //console.log(values2[0]);
          var rate = values2[0]; //console.log(rate);

          var dsf1 = [
            {name: "Hispanic, Any Race", value:values2[0]["hisp"]},
            {name: "White, Non-Hispanic", value:values2[0]["whitenh"]},
            {name: "Black, Non-Hispanic", value:values2[0]["blacknh"]},
            {name: "American Indian/AK Non-Hispanic", value:values2[0]["aiannh"]},
            {name: "Asian Non-Hispanic", value:values2[0]["asiannh"]},
            {name: "Native Hawaiian/PI Non-Hispanic", value:values2[0]["nhopinh"]},
            {name: "Other Race Non-Hispanic", value:values2[0]["othernh"]},
            {name: "Two or More Races Non-Hispanic", value:values2[0]["twoplusnh"]},
          ]; // console.log(dsf1.length);

          res=[];
          dsf1.forEach(function(d){
            res.push(d.value);
          });

          total = d3.sum(res);
          
          x.domain(dsf1.map(function(d) {return d.name; }));
          y.domain([0, d3.max(res)]);

          g.append("g")
            .attr("class", "axis axis--x")
            .attr("transform", "translate(0," + h2 + ")")
            .call(d3.axisBottom(x))
          .selectAll(".tick text")
            .call(wrap, x.bandwidth());

          g.append("g")
            .attr("class", "axis axis--y")
            .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
          .append("text")
            .attr("transform", "rotate(-90)")
            .attr("y", 6)
            .attr("dy", "0.71em")
            .attr("text-anchor", "end");
            //.text("Percent in Poverty");

          g.selectAll(".bar")
            .data(dsf1)
            .enter().append("rect")
              .attr("class", "bar")
              .attr("x", function(d) {return x(d.name); })
              .attr("y", function(d) {return y(d.value); })
              .attr("width", x.bandwidth())
              .attr("height", function(d) {return h2 - y(d.value); })
              //.style("fill", "rgb(253,141,60)");
              .style("fill", "rgb(0,77,168)");

          g.selectAll("text.bar")
            .data(dsf1)
            .enter().append("text")
              .attr("class", "barText")
              .attr("text-anchor", "middle")
              .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
              .attr("y", function(d){return y(d.value) -5; })
              //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
              .text(function(d){ return (d.value).toLocaleString(); })
              .style("font-size", "12px");

          g.selectAll("text.lbl")
            .data([total])
            .enter().append("text")
              .attr("class", "lblText")
              //.attr("text-anchor", "left")
              .attr("x", w * 0.5)
              .attr("y", h * 0.01)
              .html(function(d) {return "Total Population 18+: "+ d.toLocaleString();})
              .style("font-size", "13px");
        };

      barChart('CO');

      //****** UPDATE SF1 BAR CHART *************************

      var updateBarChartSF1 = function(geo) {
          var nest = d3.nest().key(function(d) {return d.dist; }).entries(datasf1); //console.log(nest);
        var caNest = nest.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        var values2 = caNest[0].values; // console.log(values2[0]);
        var rate = values2[0]; // console.log(rate);

        var dsf1 = [
          {name: "Hispanic, Any Race", value:values2[0]["hisp"]},
          {name: "White, Non-Hispanic", value:values2[0]["whitenh"]},
          {name: "Black, Non-Hispanic", value:values2[0]["blacknh"]},
          {name: "American Indian/AK Non-Hispanic", value:values2[0]["aiannh"]},
          {name: "Asian Non-Hispanic", value:values2[0]["asiannh"]},
          {name: "Native Hawaiian/PI Non-Hispanic", value:values2[0]["nhopinh"]},
          {name: "Other Race Non-Hispanic", value:values2[0]["othernh"]},
          {name: "Two or More Races Non-Hispanic", value:values2[0]["twoplusnh"]},
        ]; // console.log(dsf1.length);

        res=[];
        dsf1.forEach(function(d){
          res.push(d.value);
        });

        // alert(d3.max(res));

        totalDP = d3.sum(res);
        
        // x.domain(dDP.map(function(d) {return d.name; }));
        y.domain([0, d3.max(resDP)]);

        var bar = g.selectAll(".bar").remove().exit().data(dsf1);
        
        bar.enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) {return x(d.name); })
          .attr("y", function(d) {return y(d.value); })
          .attr("width", x.bandwidth())
          .attr("height", function(d) {return h2 - y(d.value); })
          // .style("fill", "rgb(253,141,60)");
          .style("fill", "rgb(0,77,168)");

        barText = g.selectAll(".barText").remove().exit().data(dsf1);

        barText.enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        lblText = g.selectAll(".lblText").remove().exit().data([totalDP]);

        lblText.enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            .attr("y", h * 0.01)
            .text(function(d) {return "Total Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");

        g.selectAll(".axis--y").remove();

        g.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
        
      };

      //*************************************************************************************************************
      //* DP BAR CHART ******
      //*************************************************************************************************************

      var nest2 = d3.nest().key(function(d) {return d.dist; }).entries(dataDP);  console.log(nest2);
        
      var barChartDP = function(geo) {
        var caNestDP = nest2.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        values2DP = caNestDP[0].values; // console.log(values2DP[0]);
        var rateDP = values2DP[0]; // console.log(rateDP);

        var dDP = [
          {name: "Hispanic, Any Race", value:values2DP[0]["hisp"]},
          {name: "White, Non-Hispanic", value:values2DP[0]["whitenh"]},
          {name: "Black, Non-Hispanic", value:values2DP[0]["blacknh"]},
          {name: "American Indian/AK Non-Hispanic", value:values2DP[0]["aiannh"]},
          {name: "Asian Non-Hispanic", value:values2DP[0]["asiannh"]},
          {name: "Native Hawaiian/PI Non-Hispanic", value:values2DP[0]["nhopinh"]},
          {name: "Other Race Non-Hispanic", value:values2DP[0]["othernh"]},
          {name: "Two or More Races Non-Hispanic", value:values2DP[0]["twoplusnh"]},
        ]; // console.log(dDP.length);

        resDP=[];
        dDP.forEach(function(d){
          resDP.push(d.value);
        });

        totalDP = d3.sum(resDP);
        
        x.domain(dDP.map(function(d) {return d.name; }));
        y.domain([0, d3.max(resDP)]);

        g1.append("g")
          .attr("class", "axis axis--x")
          .attr("transform", "translate(0," + h2 + ")")
          .call(d3.axisBottom(x))
        .selectAll(".tick text")
          .call(wrap, x.bandwidth());

        g1.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
          //.text("Percent in Poverty");

        g1.selectAll(".bar")
          .data(dDP)
          .enter().append("rect")
            .attr("class", "bar")
            .attr("x", function(d) {return x(d.name); })
            .attr("y", function(d) {return y(d.value); })
            .attr("width", x.bandwidth())
            .attr("height", function(d) {return h2 - y(d.value); })
            .style("fill", "rgb(253,141,60)");
            // .style("fill", "rgb(0,77,168)");

        g1.selectAll("text.bar")
          .data(dDP)
          .enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        g1.selectAll("text.lbl")
          .data([totalDP])
          .enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            .attr("y", h * 0.01)
            .text(function(d) {return "Total Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");
      };

      barChartDP('CO');

      //****** UPDATE DP BAR CHART *************************

      var updateBarChartDP = function(geo) {
        var nest2 = d3.nest().key(function(d) {return d.dist; }).entries(dataDP);  console.log(nest2);
          var caNestDP = nest2.filter(function(d) { return d.key == geo; }); //console.log(geo);
        var values2DP = caNestDP[0].values;  console.log(values2DP[0]);
        var rateDP = values2DP[0];  console.log(rateDP);

        var dDP = [
          {name: "Hispanic, Any Race", value:values2DP[0]["hisp"]},
          {name: "White, Non-Hispanic", value:values2DP[0]["whitenh"]},
          {name: "Black, Non-Hispanic", value:values2DP[0]["blacknh"]},
          {name: "American Indian/AK Non-Hispanic", value:values2DP[0]["aiannh"]},
          {name: "Asian Non-Hispanic", value:values2DP[0]["asiannh"]},
          {name: "Native Hawaiian/PI Non-Hispanic", value:values2DP[0]["nhopinh"]},
          {name: "Other Race Non-Hispanic", value:values2DP[0]["othernh"]},
          {name: "Two or More Races Non-Hispanic", value:values2DP[0]["twoplusnh"]},
        ]; // console.log(dDP.length);

        resDP=[];
        dDP.forEach(function(d){
          resDP.push(d.value);
        });

        // alert(d3.max(resDP));

        totalDP = d3.sum(resDP);
        
        // x.domain(dDP.map(function(d) {return d.name; }));
        y.domain([0, d3.max(resDP)]);

        var bar = g1.selectAll(".bar").remove().exit().data(dDP);
        
        bar.enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) {return x(d.name); })
          .attr("y", function(d) {return y(d.value); })
          .attr("width", x.bandwidth())
          .attr("height", function(d) {return h2 - y(d.value); })
          .style("fill", "rgb(253,141,60)");

        barText = g1.selectAll(".barText").remove().exit().data(dDP);

        barText.enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        lblText = g1.selectAll(".lblText").remove().exit().data([totalDP]);

        lblText.enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            .attr("y", h * 0.01)
            .text(function(d) {return "Total Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");

        g1.selectAll(".axis--y").remove();

        g1.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
        
      };

      //*************************************************************************************************************
      //* Difference Graph ******
      //*************************************************************************************************************

      var diffChart = function(geo) {

        var chgDP = [
            {name: "Hispanic, Any Race", value: (values2DP[0]["hisp"] - values2[0]["hisp"])},
            {name: "White, Non-Hispanic", value: (values2DP[0]["whitenh"] - values2[0]["whitenh"])},
            {name: "Black, Non-Hispanic", value: (values2DP[0]["blacknh"] - values2[0]["blacknh"])},
            {name: "American Indian/AK Non-Hispanic", value: (values2DP[0]["aiannh"] - values2[0]["aiannh"])},
            {name: "Asian Non-Hispanic", value: (values2DP[0]["asiannh"] - values2[0]["asiannh"])},
            {name: "Native Hawaiian/PI Non-Hispanic", value: (values2DP[0]["nhopinh"] - values2[0]["nhopinh"])},
            {name: "Other Race Non-Hispanic", value: (values2DP[0]["othernh"] - values2[0]["othernh"])},
            {name: "Two or More Races Non-Hispanic", value: (values2DP[0]["twoplusnh"] - values2[0]["twoplusnh"])},
        ]; // console.log(chgDP);

        resDP=[];
          chgDP.forEach(function(d){
            resDP.push(d.value);
          });

        totalDP = d3.sum(resDP);
        
        x.domain(chgDP.map(function(d) {return d.name; }));
        y.domain([d3.min(resDP), d3.max(resDP)]);

        g2.append("g")
          .attr("class", "axis axis--x")
          .attr("transform", "translate(0," + h2 + ")")
          .call(d3.axisBottom(x))
        .selectAll(".tick text")
          .call(wrap, x.bandwidth());

        g2.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");

        g2.selectAll(".bar")
          .data(chgDP)
          .enter().append("rect")
            .attr("class", function(d,i) {return d.value < 0 ? "bar negative" : "bar positive";})
            .attr("x", function(d) {return x(d.name); })
            //.attr("y", function(d) {return y(d.value); })
            .attr("y", function(d, i) {return d.value < 0 ? y(0) : y(d.value); })
            .attr("width", x.bandwidth())
            .attr("height", function(d, i) {return Math.abs(y(0) - y(d.value)); });

        g2.selectAll("text.bar")
          .data(chgDP)
          .enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        g3.selectAll("text.lbl")
          .data([totalDP])
          .enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            // .attr("y", h * 0.1)
            .text(function(d) {return "Change Population 18+: " + d.toLocaleString();})
            .style("font-size", "13px");
        
        g2.append("g")
          .attr("class","zeroLine")
          .append("line")
          .attr("x1", 0)
          .attr("x2", w)
//          .attr("width",w)
          .attr("y1", y(0))
          .attr("y2", y(0))
          .style("stroke", "#BDBDBD");

      };

      diffChart('CO');

      //****** UPDATE CHANGE BAR CHART *************************

      var updateBarChartChg = function(geo) {
var nest = d3.nest().key(function(d) {return d.dist; }).entries(datasf1); //console.log(nest);
          var nest2 = d3.nest().key(function(d) {return d.dist; }).entries(dataDP);  console.log(nest2)
        // DP data
        var caNestDP = nest2.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        var values2DP = caNestDP[0].values; // console.log(values2DP[0]);
        var rateDP = values2DP[0]; // console.log(rateDP);

        // SF1 data
        var caNest = nest.filter(function(d) { return d.key == geo; }); //console.log(caNest[0].values["hisp"]);
        var values2 = caNest[0].values; // console.log(values2[0]);
        var rate = values2[0]; // console.log(rate);

        var chgDP = [
            {name: "Hispanic, Any Race", value: (values2DP[0]["hisp"] - values2[0]["hisp"])},
            {name: "White, Non-Hispanic", value: (values2DP[0]["whitenh"] - values2[0]["whitenh"])},
            {name: "Black, Non-Hispanic", value: (values2DP[0]["blacknh"] - values2[0]["blacknh"])},
            {name: "American Indian/AK Non-Hispanic", value: (values2DP[0]["aiannh"] - values2[0]["aiannh"])},
            {name: "Asian Non-Hispanic", value: (values2DP[0]["asiannh"] - values2[0]["asiannh"])},
            {name: "Native Hawaiian/PI Non-Hispanic", value: (values2DP[0]["nhopinh"] - values2[0]["nhopinh"])},
            {name: "Other Race Non-Hispanic", value: (values2DP[0]["othernh"] - values2[0]["othernh"])},
            {name: "Two or More Races Non-Hispanic", value: (values2DP[0]["twoplusnh"] - values2[0]["twoplusnh"])},
        ]; // console.log(chgDP);

        resDP=[];
        chgDP.forEach(function(d){
          resDP.push(d.value);
        });

        // alert(d3.max(resDP));

        totalDP = d3.sum(resDP);

        y.domain([d3.min(resDP), d3.max(resDP)]);

        var bar = g2.selectAll(".bar").remove().exit().data(chgDP);
        
        bar.enter().append("rect")
            .attr("class", function(d,i) {return d.value < 0 ? "bar negative" : "bar positive";})
            .attr("x", function(d) {return x(d.name); })
            .attr("y", function(d, i) {return d.value < 0 ? y(0) : y(d.value); })
            .attr("width", x.bandwidth())
            .attr("height", function(d, i) {return Math.abs(y(0) - y(d.value)); });

        barText = g2.selectAll(".barText").remove().exit().data(chgDP);

        barText.enter().append("text")
            .attr("class", "barText")
            .attr("text-anchor", "middle")
            .attr("x", function(d){return x(d.name) + x.bandwidth()/2; })
            .attr("y", function(d){return y(d.value) -5; })
            //.text(function(d){ return (d.value * 100).toFixed(1) + "%"; })
            .text(function(d){ return (d.value).toLocaleString(); })
            .style("font-size", "12px");

        lblText = g3.selectAll(".lblText").remove().exit().data([totalDP]);

        lblText.enter().append("text")
            .attr("class", "lblText")
            //.attr("text-anchor", "left")
            .attr("x", w * 0.5)
            //.attr("y", h * 0.005)
            .text(function(d) {return "Total Population Change: " + d.toLocaleString();})
            .style("font-size", "13px");

        g2.selectAll(".axis--y").remove();

        g2.append("g")
          .attr("class", "axis axis--y")
          .call(d3.axisLeft(y)/*.ticks(10,"")*/.tickFormat(d3.format(".2s")) )
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", "0.71em")
          .attr("text-anchor", "end");
        
        // Zero line
        g2.select(".zeroLine").remove();

        g2.append("g")
          .attr("class","zeroLine")
          .append("line")
          .attr("x1", 0)
          .attr("x2", w)
//          .attr("width",w)
          .attr("y1", y(0))
          .attr("y2", y(0))
          .style("stroke", "white");

      }

      //*************************************************************************************************************
      //* MAP ******
      //*************************************************************************************************************

      var data1 = {},
      values=[];
      for (j=0; j<chgdata.length; j++) {
          data1[chgdata[j].dist] = chgdata[j].chg;
          values.push(chgdata[j].chg);
      }

      brew.setSeries(values);
      brew.setNumClasses(5);
      brew.classify("jenks")
      brew.setColorCode("RdYlBu")

      function mapstyle(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.5,
          fillColor: brew.getColorInRange(data1[feature.properties.DISTNUM])
        };
      }

      var map = L.map('map');

      var cartoPositron = L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
	      attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	      subdomains: 'abcd',
	      maxZoom: 19
      }).addTo(map);

      var layerGroup = L.layerGroup().addTo(map);

      var jLayer = L.geoJSON(geo, {
        style: mapstyle,
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.chg = chgdata[i].chg;
                feature.properties.hisp = chgdata[i].hisp;
              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.chg)
            
            // layer.on('click', function(e){
            //   // alert(e.target.feature.properties.DISTNUM);
            //   updateBarChartDP(e.target.feature.properties.DISTNUM);
            //   document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 years and Over by Race - CD "+e.target.feature.properties.DISTNUM;
            // })
          }
      }).addTo(layerGroup);

      map.fitBounds(jLayer.getBounds());

      map.on('click', function(e){
        updateBarChartDP('CO');
        updateBarChartSF1('CO');
        updateBarChartChg('CO');
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 years and Over by Race - Colorado";
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - Colorado";
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - Colorado";
        // alert('click on the map')
      })

      jLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      })

      // var popupTemplate = "<h3>Congressional District {DISTNUM}</h3><br>Total Change in the Hispanic population: {hisp}";

      // jLayer.bindPopup(function(e){
      //   console.log(e.feature.properties)
      //   return L.Util.template(popupTemplate, e.feature.properties)
      // });

      //********************************************************
      //* ADD LEGEND
      //********************************************************

      var legend = L.control({position: 'bottomleft'});

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brew.getBreaks(),
          labels = ['<strong>Total Population</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brew.getColorInRange(to) + '"></i> ' +
            from.toLocaleString(0) + ' to ' + to.toLocaleString(0));
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

    // ******************************************************************************
    // *** Map on-click
    //*******************************************************************************      
      // map.on('click', function(event) {
      //   alert(event.feature.properties);
      // })

    // ******************************************************************************
    // *** Hispanic View
    //*******************************************************************************

    hispLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].hisp;
          valuesH.push(chgdata[j].hisp);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var hLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.chg = chgdata[i].chg;
                feature.properties.hisp = chgdata[i].hisp;
              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.hisp.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Hispanic, Any Race</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);
    
      hLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }

    // ******************************************************************************
    // *** White NH View
    //*******************************************************************************

    wnhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].whitenh;
          valuesH.push(chgdata[j].whitenh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var wLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.whitenh = chgdata[i].whitenh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.whitenh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);
      console.log(wLayer);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>White, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      wLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }

    // ******************************************************************************
    // *** Black NH View
    //*******************************************************************************

    bnhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].blacknh;
          valuesH.push(chgdata[j].blacknh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var bLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.blacknh = chgdata[i].blacknh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.blacknh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Black, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      bLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }

    // ******************************************************************************
    // *** American Indian NH View
    //*******************************************************************************

    aiannhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].aiannh;
          valuesH.push(chgdata[j].aiannh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var AmInLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.aiannh = chgdata[i].aiannh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.aiannh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>American Indian and<br>Native Alaskan,<br>Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      AmInLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        // alert('click on json');
        // console.log(e.layer.feature.properties.DISTNUM)
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }


    // ******************************************************************************
    // *** Asian NH View
    //*******************************************************************************

    anhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].asiannh;
          valuesH.push(chgdata[j].asiannh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var aLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.asiannh = chgdata[i].asiannh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.asiannh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Asian, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      aLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }    

    // ******************************************************************************
    // *** Native Hawaiian NH View
    //*******************************************************************************

    nhopiLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].nhopinh;
          valuesH.push(chgdata[j].nhopinh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var nhLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.nhopinh = chgdata[i].nhopinh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.nhopinh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Native Hawaiian and<br>Other Pacific Islander,<br>Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      nhLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });
    
    }    

    // ******************************************************************************
    // *** Other NH View
    //*******************************************************************************

    onhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].othernh;
          valuesH.push(chgdata[j].othernh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("jenks")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var oLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.othernh = chgdata[i].othernh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.othernh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Other, Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      oLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }   

    // ******************************************************************************
    // *** Two or More NH View
    //*******************************************************************************

    tomnhLayer = function() {

      layerGroup.clearLayers();

      var dataH = {},
      valuesH=[];
      for (j=0; j<chgdata.length; j++) {
          dataH[chgdata[j].dist] = chgdata[j].twoplusnh;
          valuesH.push(chgdata[j].twoplusnh);
      }

      var brewH = new classyBrew();

      brewH.setSeries(valuesH);
      brewH.setNumClasses(5);
      brewH.classify("quantile")
      brewH.setColorCode("RdYlBu")      

      function mapstyleH(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brewH.getColorInRange(dataH[feature.properties.DISTNUM])
        };
      }

      var twoLayer = L.geoJson(geo, {
        style: mapstyleH, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
              if (feature.properties.DISTNUM == chgdata[i].dist) {
                feature.properties.twoplusnh = chgdata[i].twoplusnh;

              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.twoplusnh.toLocaleString())
            // console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brewH.getBreaks(),
          labels = ['<strong>Two or More Races,<br>Non-Hispanic</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brewH.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      twoLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e);
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });
      
    }   

    // ******************************************************************************
    // *** Original View
    //********************************************************************************
    
    origLayer = function() {

      layerGroup.clearLayers();
$("#raceEthnicity").val("tp");
      var data1 = {},
      values=[];
      for (j=0; j<chgdata.length; j++) {
          data1[chgdata[j].dist] = chgdata[j].chg;
          values.push(chgdata[j].chg);
      }

      var brew = new classyBrew();

      brew.setSeries(values);
      brew.setNumClasses(5);
      brew.classify("jenks")
      brew.setColorCode("RdYlBu")      

      function mapstyle(feature) {
        return{
          weight: 1,
          opacity: 1,
          color: 'white',
          fillOpacity: 0.7,
          fillColor: brew.getColorInRange(data1[feature.properties.DISTNUM])
        };
      }

      var origLayer = L.geoJson(geo, {
          style: mapstyle, 
        onEachFeature: function(feature, layer) {
            for(i=0; i<distnum; i++){
             
                if (feature.properties.DISTNUM == chgdata[i].dist) { 
                  feature.properties.chg = chgdata[i].chg;
                feature.properties.hisp = chgdata[i].hisp;
                                                                    
              }
            }
            layer.bindTooltip("District "+feature.properties.DISTNUM+"<br>Change in Population: "+feature.properties.chg.toLocaleString())
             //console.log(feature.properties.chg);
          }
      }).addTo(layerGroup);

      legend.remove();

      legend.onAdd = function (map) {
        var div = L.DomUtil.create('div', 'info legend'),
          percents = brew.getBreaks(),
          labels = ['<strong>Total Population</strong>'],
          from, to;

        for (var i = 0; i < (percents.length); i++) {
          // console.log(i);
          from = percents[i];
          to = percents[i + 1];
          if(to) {
          labels.push(
            '<i style="background:' + brew.getColorInRange(to) + '"></i> ' +
            from.toLocaleString() + ' to ' + to.toLocaleString());
          }
        }

        div.innerHTML = labels.join('<br>');
        return div;
      };
      legend.addTo(map);

      origLayer.on('click',function(e){
        L.DomEvent.stopPropagation(e); 
        updateBarChartDP(e.layer.feature.properties.DISTNUM);
        updateBarChartSF1(e.layer.feature.properties.DISTNUM);
        updateBarChartChg(e.layer.feature.properties.DISTNUM);
        document.getElementById("dpTag").innerHTML = "Differential Privacy - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("sf1Tag").innerHTML = "SF1 - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
        document.getElementById("chgTag").innerHTML = "Difference (DP - SF1) - Population 18 Years and Over by Race - District "+e.layer.feature.properties.DISTNUM;
      });

    }  

    // *********************************************************************
    // onchange function
    // *********************************************************************

    $("#raceEthnicity").on('change', function(){
      // console.log($(this).val());

      if ($(this).val() == 'hisp'){
        hispLayer();
      };

      if ($(this).val() == 'tp'){
        origLayer();
      };

      if ($(this).val() == 'wnh'){
        wnhLayer();
      };

      if ($(this).val() == 'bnh'){
        bnhLayer();
      };

      if ($(this).val() == 'aiannh'){
        aiannhLayer();
      };

      if ($(this).val() == 'anh'){
        anhLayer();
      };

      if ($(this).val() == 'nhpinh'){
        nhopiLayer();
      };

      if ($(this).val() == 'onh'){
        onhLayer();
      };

      if ($(this).val() == 'tomnh'){
        tomnhLayer();
      };      

    }); 
        
    $("#districtType").on('change', function(){
      // console.log($(this).val());

      if ($(this).val() == 'cd'){
        geo = cd;
        //DISTNUM = "CD113FP";
        dist = "CD113";
        distnum = 7;
        chgdata = cd_data;
        datasf1 = cd_sf1;
        dataDP = cd_dp;
          origLayer();
      };

      if ($(this).val() == 'sldu'){
        geo = sldu;
        //DISTNUM = "SLDUST";
        dist = "sldu";
        distnum = 35;
        chgdata = sldu_data;
        datasf1 = sldu_sf1;
        dataDP = sldu_dp;
        origLayer();
          
      };

      if ($(this).val() == 'sldl'){
        geo = sldl;console.log("sldl");
        //DISTNUM = "SLDLST";
        dist = "sldl";
        distnum = 65;
        chgdata = sldl_data;
        datasf1 = sldl_sf1;
        dataDP = sldl_dp;
          origLayer();
      };

    });       


    // *********************************************************************
    // Miscellaneous functions
    // *********************************************************************

    function wrap(text, width) {
	  text.each(function() {
	    var text = d3.select(this),
		words = text.text().split(/\s+/).reverse(),
		word,
		line = [],
		lineNumber = 0,
		lineHeight = 1.1, // ems
		y = text.attr("y"),
		dy = parseFloat(text.attr("dy")),
		tspan = text.text(null).append("tspan").attr("x", 0).attr("y", y).attr("dy", dy + "em")
	    while (word = words.pop()) {
	      line.push(word)
	      tspan.text(line.join(" "))
	      if (tspan.node().getComputedTextLength() > width) {
		line.pop()
		tspan.text(line.join(" "))
		line = [word]
		/* tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", `${++lineNumber * lineHeight + dy}em`).text(word) */
		tspan = text.append("tspan").attr("x", 0).attr("y", y).attr("dy", ++lineNumber * lineHeight + dy + "em").text(word)
	      }
	    }
	  })
	}
        
    

    </script>
  </body>
</html>
